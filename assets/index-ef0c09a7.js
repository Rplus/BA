var lt=Object.defineProperty;var nt=(e,t,l)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var _e=(e,t,l)=>(nt(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=l(i);fetch(i.href,o)}})();function U(){}function Ke(e){return e()}function $e(){return Object.create(null)}function V(e){e.forEach(Ke)}function We(e){return typeof e=="function"}function le(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ce;function we(e,t){return e===t?!0:(ce||(ce=document.createElement("a")),ce.href=t,e===ce.href)}function it(e){return Object.keys(e).length===0}function v(e,t){e.appendChild(t)}function N(e,t,l){e.insertBefore(t,l||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function b(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function B(){return O(" ")}function st(){return O("")}function D(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function rt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function p(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function ot(e){return Array.from(e.childNodes)}function H(e,t){t=""+t,e.data!==t&&(e.data=t)}function Te(e,t){e.value=t??""}function I(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function fe(e,t,l){e.classList.toggle(t,!!l)}function at(e,t,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:l,cancelable:n})}let te;function ee(e){te=e}function Je(){if(!te)throw new Error("Function called outside component initialization");return te}function Qe(e){Je().$$.on_mount.push(e)}function Xe(){const e=Je();return(t,l,{cancelable:n=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=at(t,l,{cancelable:n});return i.slice().forEach(u=>{u.call(e,o)}),!o.defaultPrevented}return!0}}function ut(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(n=>n.call(this,t))}const J=[],me=[];let Q=[];const Se=[],ct=Promise.resolve();let ge=!1;function ft(){ge||(ge=!0,ct.then(Ye))}function ve(e){Q.push(e)}const pe=new Set;let W=0;function Ye(){if(W!==0)return;const e=te;do{try{for(;W<J.length;){const t=J[W];W++,ee(t),dt(t.$$)}}catch(t){throw J.length=0,W=0,t}for(ee(null),J.length=0,W=0;me.length;)me.pop()();for(let t=0;t<Q.length;t+=1){const l=Q[t];pe.has(l)||(pe.add(l),l())}Q.length=0}while(J.length);for(;Se.length;)Se.pop()();ge=!1,pe.clear(),ee(e)}function dt(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ve)}}function ht(e){const t=[],l=[];Q.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),Q=t}const de=new Set;let G;function X(){G={r:0,c:[],p:G}}function Y(){G.r||V(G.c),G=G.p}function M(e,t){e&&e.i&&(de.delete(e),e.i(t))}function j(e,t,l,n){if(e&&e.o){if(de.has(e))return;de.add(e),G.c.push(()=>{de.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function z(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ze(e,t){j(e,1,1,()=>{t.delete(e.key)})}function xe(e,t,l,n,i,o,u,_,s,r,a,d){let h=e.length,c=o.length,f=h;const g={};for(;f--;)g[e[f].key]=f;const m=[],y=new Map,q=new Map,S=[];for(f=c;f--;){const T=d(i,o,f),A=l(T);let L=u.get(A);L?n&&S.push(()=>L.p(T,t)):(L=r(A,T),L.c()),y.set(A,m[f]=L),A in g&&q.set(A,Math.abs(f-g[A]))}const w=new Set,$=new Set;function k(T){M(T,1),T.m(_,a),u.set(T.key,T),a=T.first,c--}for(;h&&c;){const T=m[c-1],A=e[h-1],L=T.key,F=A.key;T===A?(a=T.first,h--,c--):y.has(F)?!u.has(L)||w.has(L)?k(T):$.has(F)?h--:q.get(L)>q.get(F)?($.add(L),k(T)):(w.add(F),h--):(s(A,u),h--)}for(;h--;){const T=e[h];y.has(T.key)||s(T,u)}for(;c;)k(m[c-1]);return V(S),m}function ie(e){e&&e.c()}function Z(e,t,l){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,l),ve(()=>{const o=e.$$.on_mount.map(Ke).filter(We);e.$$.on_destroy?e.$$.on_destroy.push(...o):V(o),e.$$.on_mount=[]}),i.forEach(ve)}function x(e,t){const l=e.$$;l.fragment!==null&&(ht(l.after_update),V(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function _t(e,t){e.$$.dirty[0]===-1&&(J.push(e),ft(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,l,n,i,o,u,_=[-1]){const s=te;ee(e);const r=e.$$={fragment:null,ctx:[],props:o,update:U,not_equal:i,bound:$e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:$e(),dirty:_,skip_bound:!1,root:t.target||s.$$.root};u&&u(r.root);let a=!1;if(r.ctx=l?l(e,t.props||{},(d,h,...c)=>{const f=c.length?c[0]:h;return r.ctx&&i(r.ctx[d],r.ctx[d]=f)&&(!r.skip_bound&&r.bound[d]&&r.bound[d](f),a&&_t(e,d)),h}):[],r.update(),a=!0,V(r.before_update),r.fragment=n?n(r.ctx):!1,t.target){if(t.hydrate){const d=ot(t.target);r.fragment&&r.fragment.l(d),d.forEach(E)}else r.fragment&&r.fragment.c();t.intro&&M(e.$$.fragment),Z(e,t.target,t.anchor),Ye()}ee(s)}class re{constructor(){_e(this,"$$");_e(this,"$$set")}$destroy(){x(this,1),this.$destroy=U}$on(t,l){if(!We(l))return U;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!it(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pt);const mt="/BA/assets/students-37ead7a7.json",gt={Explosion:"爆發",Pierce:"貫穿",Mystic:"神秘",Sonic:"振動",Main:"前排",Support:"後排",School:"學園",TacticRole:"作用",Position:"射程",BulletType:"攻屬",ArmorType:"防屬",SquadType:"分類",DamageDealer:"輸出",Tanker:"坦克",Supporter:"輔助",Healer:"治療",Vehicle:"T.S.",Back:"遠距",Front:"近距",Middle:"中距",LightArmor:"輕甲",HeavyArmor:"重甲",Unarmed:"特殊",ElasticArmor:"彈力",Gehenna:"格黑娜",Millennium:"千年",Trinity:"三一",Abydos:"阿拜多斯",Shanhaijing:"山海經",Hyakkiyako:"百鬼夜行",RedWinter:"赤冬",Valkyrie:"女武神",ETC:"?",SRT:"SRT",Arius:"奧利斯"},et="https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images";function qe(e){return`${et}/student/collection/${e}.webp`}function Be(e){return`${et}/ui/Role_${e.TacticRole}.png`}function C(e=""){return gt[e]||e}function vt(e){let t;return{c(){t=b("div"),t.textContent="?",p(t,"class","empty svelte-18zgtgq")},m(l,n){N(l,t,n)},p:U,d(l){l&&E(t)}}}function yt(e){let t,l,n,i,o,u,_=C(e[0].BulletType).slice(0,1)+"",s,r,a,d,h,c=C(e[0].ArmorType).slice(0,1)+"",f,g,m,y,q,S,w=e[0].Name_tw+"",$,k,T,A,L=e[0].PathName+"",F,oe,ye,be,ke,K,ae=e[0].Name_jp+"",he,ue;return{c(){t=b("img"),i=B(),o=b("div"),u=b("div"),s=O(_),d=B(),h=b("div"),f=O(c),y=B(),q=b("div"),S=b("div"),$=O(w),k=B(),T=b("div"),A=b("a"),F=O(L),ye=B(),be=b("br"),ke=B(),K=b("a"),he=O(ae),p(t,"class","avatar svelte-18zgtgq"),we(t.src,l=qe(e[0].Id))||p(t,"src",l),p(t,"alt",n=Ae(e[0])),p(u,"class","icon color svelte-18zgtgq"),p(u,"data-bullettype",r=e[0].BulletType),p(u,"title",a=e[0].BulletType),p(h,"class","icon color svelte-18zgtgq"),p(h,"data-armortype",g=e[0].ArmorType),p(h,"title",m=e[0].ArmorType),p(o,"class","icons svelte-18zgtgq"),p(S,"class","name-inner svelte-18zgtgq"),p(A,"href",oe="https://schale.gg/?chara="+e[0].PathName),p(A,"target","schale.gg"),p(K,"href",ue="https://bluearchive.wikiru.jp/?"+e[0].Name_jp+"#Profile"),p(K,"target","wikiru"),p(T,"class","tip svelte-18zgtgq"),p(q,"class","name svelte-18zgtgq"),I(q,"--icon-role","url("+Be(e[0])+")")},m(P,R){N(P,t,R),N(P,i,R),N(P,o,R),v(o,u),v(u,s),v(o,d),v(o,h),v(h,f),N(P,y,R),N(P,q,R),v(q,S),v(S,$),v(q,k),v(q,T),v(T,A),v(A,F),v(T,ye),v(T,be),v(T,ke),v(T,K),v(K,he)},p(P,R){R&1&&!we(t.src,l=qe(P[0].Id))&&p(t,"src",l),R&1&&n!==(n=Ae(P[0]))&&p(t,"alt",n),R&1&&_!==(_=C(P[0].BulletType).slice(0,1)+"")&&H(s,_),R&1&&r!==(r=P[0].BulletType)&&p(u,"data-bullettype",r),R&1&&a!==(a=P[0].BulletType)&&p(u,"title",a),R&1&&c!==(c=C(P[0].ArmorType).slice(0,1)+"")&&H(f,c),R&1&&g!==(g=P[0].ArmorType)&&p(h,"data-armortype",g),R&1&&m!==(m=P[0].ArmorType)&&p(h,"title",m),R&1&&w!==(w=P[0].Name_tw+"")&&H($,w),R&1&&L!==(L=P[0].PathName+"")&&H(F,L),R&1&&oe!==(oe="https://schale.gg/?chara="+P[0].PathName)&&p(A,"href",oe),R&1&&ae!==(ae=P[0].Name_jp+"")&&H(he,ae),R&1&&ue!==(ue="https://bluearchive.wikiru.jp/?"+P[0].Name_jp+"#Profile")&&p(K,"href",ue),R&1&&I(q,"--icon-role","url("+Be(P[0])+")")},d(P){P&&(E(t),E(i),E(o),E(y),E(q))}}}function bt(e){let t;function l(o,u){return o[0].Id?yt:vt}let n=l(e),i=n(e);return{c(){t=b("div"),i.c(),p(t,"class","student svelte-18zgtgq")},m(o,u){N(o,t,u),i.m(t,null)},p(o,[u]){n===(n=l(o))&&i?i.p(o,u):(i.d(1),i=n(o),i&&(i.c(),i.m(t,null)))},i:U,o:U,d(o){o&&E(t),i.d()}}}function Ae(e){return`${e.Name_tw}, ${e.Name_jp}, ${e.PathName}`}function kt(e,t,l){let{student:n={}}=t;return e.$$set=i=>{"student"in i&&l(0,n=i.student)},[n]}class tt extends re{constructor(t){super(),se(this,t,kt,bt,le,{student:0})}}function Ee(e,t,l){const n=e.slice();return n[17]=t[l],n}function Pe(e,t,l){const n=e.slice();return n[20]=t[l],n[21]=t,n[22]=l,n}function Ne(e){let t,l,n,i,o,u,_=C(e[20].label)+"",s,r,a,d;function h(){e[8].call(n,e[21],e[22])}return{c(){t=b("div"),l=b("label"),n=b("input"),i=B(),o=b("i"),u=B(),s=O(_),r=B(),p(n,"type","checkbox"),p(o,"class","label-icon"),I(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+e[20].label+".png')")},m(c,f){N(c,t,f),v(t,l),v(l,n),n.checked=e[20].value,v(l,i),v(l,o),v(l,u),v(l,s),v(t,r),a||(d=D(n,"change",h),a=!0)},p(c,f){e=c,f&2&&(n.checked=e[20].value),f&2&&_!==(_=C(e[20].label)+"")&&H(s,_),f&2&&I(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+e[20].label+".png')")},d(c){c&&E(t),a=!1,d()}}}function Me(e){let t,l,n=C(e[17].prop)+"",i,o,u,_,s,r,a,d,h,c=z(e[17].filters),f=[];for(let g=0;g<c.length;g+=1)f[g]=Ne(Pe(e,c,g));return{c(){t=b("fieldset"),l=b("legend"),i=O(n),o=B(),u=b("details"),_=b("summary"),s=B(),r=b("div");for(let g=0;g<f.length;g+=1)f[g].c();d=B(),p(_,"class","svelte-1qypxk3"),p(u,"class","filter-details svelte-1qypxk3"),u.open=a=e[17].filters.length<5,p(t,"class",h="filter-cate__"+e[17].prop+" svelte-1qypxk3")},m(g,m){N(g,t,m),v(t,l),v(l,i),v(t,o),v(t,u),v(u,_),v(u,s),v(u,r);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(r,null);v(t,d)},p(g,m){if(m&2&&n!==(n=C(g[17].prop)+"")&&H(i,n),m&2){c=z(g[17].filters);let y;for(y=0;y<c.length;y+=1){const q=Pe(g,c,y);f[y]?f[y].p(q,m):(f[y]=Ne(q),f[y].c(),f[y].m(r,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=c.length}m&2&&a!==(a=g[17].filters.length<5)&&(u.open=a),m&2&&h!==(h="filter-cate__"+g[17].prop+" svelte-1qypxk3")&&p(t,"class",h)},d(g){g&&E(t),ne(f,g)}}}function $t(e){let t,l,n,i,o,u,_,s,r,a,d,h,c,f,g=z(e[1]),m=[];for(let y=0;y<g.length;y+=1)m[y]=Me(Ee(e,g,y));return{c(){t=b("div"),l=B(),n=b("form"),i=b("details"),o=b("summary"),u=O(`Filters
			`),_=b("label"),s=b("input"),r=B(),a=b("input"),d=B(),h=b("div");for(let y=0;y<m.length;y+=1)m[y].c();p(t,"class","dynamic-style"),p(s,"type","search"),p(s,"placeholder","name"),s.autofocus=!0,p(s,"accesskey","q"),p(a,"type","reset"),a.value="Reset",p(o,"class","filter-summary svelte-1qypxk3"),p(h,"class","flex svelte-1qypxk3"),i.open=!0,p(n,"class","filter-form svelte-1qypxk3")},m(y,q){N(y,t,q),e[6](t),N(y,l,q),N(y,n,q),v(n,i),v(i,o),v(o,u),v(o,_),v(_,s),Te(s,e[0]),v(o,r),v(o,a),v(i,d),v(i,h);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(h,null);s.focus(),c||(f=[D(s,"keydown",rt(e[5])),D(s,"input",e[7]),D(n,"reset",e[3])],c=!0)},p(y,[q]){if(q&1&&s.value!==y[0]&&Te(s,y[0]),q&2){g=z(y[1]);let S;for(S=0;S<g.length;S+=1){const w=Ee(y,g,S);m[S]?m[S].p(w,q):(m[S]=Me(w),m[S].c(),m[S].m(h,null))}for(;S<m.length;S+=1)m[S].d(1);m.length=g.length}},i:U,o:U,d(y){y&&(E(t),E(l),E(n)),e[6](null),ne(m,y),c=!1,V(f)}}}const Re=".student-outer";function wt(e,t,l){let{students:n}=t,i=new URLSearchParams(location.search),o,u=i.get("name")||"",_=["School","TacticRole","BulletType","ArmorType","SquadType","Position"],s=a(n),r={name:"",checkbox:""};function a(w){return _.map($=>({prop:$,filters:[...new Set(w.map(k=>k[$]))].sort(d).map(k=>({label:k,value:!1}))}))}function d(w,$){let k=C(w),T=C($),A=k.length,L=T.length;return A===L?0:L-A}function h(){let w=u==null?void 0:u.trim();r.name=w?`${Re}:not([data-name*="${w}"]) { display: none; }`:"",f()}function c(){let w=s.map(k=>k.filters.filter(A=>A.value).length?k.filters.filter(A=>!A.value).map(A=>`[data-${k.prop.toLowerCase()}="${A.label}"]`):void 0).flat().filter(Boolean),$=w.length?w.map(k=>`${Re}${k}`).join()+"{ display: none !important; }":"";r.checkbox=$,f()}function f(){if(!o)return;let w=r.name+r.checkbox;l(2,o.innerHTML=w?`<style>${w}</style>`:"",o)}function g(){l(0,u=""),s.forEach(w=>{w.filters.forEach($=>{$.value=!1})}),l(1,s)}Qe(()=>{f()});function m(w){ut.call(this,e,w)}function y(w){me[w?"unshift":"push"](()=>{o=w,l(2,o)})}function q(){u=this.value,l(0,u)}function S(w,$){w[$].value=this.checked,l(1,s)}return e.$$set=w=>{"students"in w&&l(4,n=w.students)},e.$$.update=()=>{e.$$.dirty&1&&h(),e.$$.dirty&2&&c()},[u,s,o,g,n,m,y,q,S]}class Tt extends re{constructor(t){super(),se(this,t,wt,$t,le,{students:4})}}function Le(e,t,l){const n=e.slice();return n[8]=t[l],n}function je(e,t,l){const n=e.slice();return n[11]=t[l],n}function ze(e,t,l){const n=e.slice();return n[14]=t[l],n}function Ce(e,t){let l,n,i,o,u,_,s,r,a,d,h,c;n=new tt({props:{student:t[14]}});function f(){return t[3](t[14])}return{key:e,first:null,c(){l=b("div"),ie(n.$$.fragment),p(l,"class","student-outer svelte-mh4ein"),p(l,"data-name",i=t[14].Name_tw),p(l,"data-school",o=t[14].School),p(l,"data-position",u=t[14].Position),p(l,"data-armortype",_=t[14].ArmorType),p(l,"data-bullettype",s=t[14].BulletType),p(l,"data-squadtype",r=t[14].SquadType),p(l,"data-tacticrole",a=t[14].TacticRole),this.first=l},m(g,m){N(g,l,m),Z(n,l,null),d=!0,h||(c=D(l,"click",f),h=!0)},p(g,m){t=g;const y={};m&2&&(y.student=t[14]),n.$set(y),(!d||m&2&&i!==(i=t[14].Name_tw))&&p(l,"data-name",i),(!d||m&2&&o!==(o=t[14].School))&&p(l,"data-school",o),(!d||m&2&&u!==(u=t[14].Position))&&p(l,"data-position",u),(!d||m&2&&_!==(_=t[14].ArmorType))&&p(l,"data-armortype",_),(!d||m&2&&s!==(s=t[14].BulletType))&&p(l,"data-bullettype",s),(!d||m&2&&r!==(r=t[14].SquadType))&&p(l,"data-squadtype",r),(!d||m&2&&a!==(a=t[14].TacticRole))&&p(l,"data-tacticrole",a)},i(g){d||(M(n.$$.fragment,g),d=!0)},o(g){j(n.$$.fragment,g),d=!1},d(g){g&&E(l),x(n),h=!1,c()}}}function Oe(e){let t,l=[],n=new Map,i,o,u,_=z(e[11].members);const s=r=>r[14].PathName;for(let r=0;r<_.length;r+=1){let a=ze(e,_,r),d=s(a);n.set(d,l[r]=Ce(d,a))}return{c(){t=b("div");for(let r=0;r<l.length;r+=1)l[r].c();i=B(),p(t,"class","cell svelte-mh4ein"),p(t,"data-bullettype",o=C(e[8].BulletType)),I(t,"grid-area",e[11].SquadType+"-"+e[8].BulletType)},m(r,a){N(r,t,a);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(t,null);v(t,i),u=!0},p(r,a){a&6&&(_=z(r[11].members),X(),l=xe(l,a,s,1,r,_,n,t,Ze,Ce,i,ze),Y()),(!u||a&2&&o!==(o=C(r[8].BulletType)))&&p(t,"data-bullettype",o),(!u||a&2)&&I(t,"grid-area",r[11].SquadType+"-"+r[8].BulletType)},i(r){if(!u){for(let a=0;a<_.length;a+=1)M(l[a]);u=!0}},o(r){for(let a=0;a<l.length;a+=1)j(l[a]);u=!1},d(r){r&&E(t);for(let a=0;a<l.length;a+=1)l[a].d()}}}function De(e){let t,l,n=z(e[8].cxt),i=[];for(let u=0;u<n.length;u+=1)i[u]=Oe(je(e,n,u));const o=u=>j(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();t=st()},m(u,_){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(u,_);N(u,t,_),l=!0},p(u,_){if(_&6){n=z(u[8].cxt);let s;for(s=0;s<n.length;s+=1){const r=je(u,n,s);i[s]?(i[s].p(r,_),M(i[s],1)):(i[s]=Oe(r),i[s].c(),M(i[s],1),i[s].m(t.parentNode,t))}for(X(),s=n.length;s<i.length;s+=1)o(s);Y()}},i(u){if(!l){for(let _=0;_<n.length;_+=1)M(i[_]);l=!0}},o(u){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)j(i[_]);l=!1},d(u){u&&E(t),ne(i,u)}}}function St(e){let t,l,n,i,o,u,_,s,r;l=new Tt({props:{students:e[0]}});let a=z(e[1]),d=[];for(let c=0;c<a.length;c+=1)d[c]=De(Le(e,a,c));const h=c=>j(d[c],1,1,()=>{d[c]=null});return{c(){t=b("div"),ie(l.$$.fragment),n=B(),i=b("div"),o=b("div"),o.textContent="前",u=B(),_=b("div"),_.textContent="後",s=B();for(let c=0;c<d.length;c+=1)d[c].c();p(o,"class","cell th svelte-mh4ein"),I(o,"grid-area","Main-title"),p(_,"class","cell th svelte-mh4ein"),I(_,"grid-area","Support-title"),p(i,"class","table svelte-mh4ein")},m(c,f){N(c,t,f),Z(l,t,null),v(t,n),v(t,i),v(i,o),v(i,u),v(i,_),v(i,s);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(i,null);r=!0},p(c,[f]){const g={};if(f&1&&(g.students=c[0]),l.$set(g),f&6){a=z(c[1]);let m;for(m=0;m<a.length;m+=1){const y=Le(c,a,m);d[m]?(d[m].p(y,f),M(d[m],1)):(d[m]=De(y),d[m].c(),M(d[m],1),d[m].m(i,null))}for(X(),m=a.length;m<d.length;m+=1)h(m);Y()}},i(c){if(!r){M(l.$$.fragment,c);for(let f=0;f<a.length;f+=1)M(d[f]);r=!0}},o(c){j(l.$$.fragment,c),d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)j(d[f]);r=!1},d(c){c&&E(t),x(l),ne(d,c)}}}function qt(e,t,l){let{students:n=[]}=t;const i=Xe();let o=["Explosion","Pierce","Mystic","Sonic"],u;s();function _(){l(1,u=o.map(d=>({BulletType:d,cxt:[{SquadType:"Main",members:[]},{SquadType:"Support",members:[]}]})))}function s(){_(),n.forEach(d=>{let h=o.findIndex(c=>c===d.BulletType);u[h].cxt[d.SquadType==="Main"?0:1].members.push(d)})}function r(d){i("select",{student:d})}const a=d=>r(d);return e.$$set=d=>{"students"in d&&l(0,n=d.students)},[n,u,r,a]}class Bt extends re{constructor(t){super(),se(this,t,qt,St,le,{students:0})}}function Ie(e,t,l){const n=e.slice();return n[10]=t[l],n[12]=l,n}function Fe(e,t,l){const n=e.slice();return n[13]=t[l],n[15]=l,n}function He(e){let t,l,n,i,o,u;l=new tt({props:{student:e[13]}});function _(){return e[8](e[12],e[15])}return{c(){t=b("button"),ie(l.$$.fragment),p(t,"class","student-box svelte-lavo2d"),p(t,"aria-current",n=e[12]===e[0][0]&&e[15]===e[0][1])},m(s,r){N(s,t,r),Z(l,t,null),i=!0,o||(u=D(t,"click",_),o=!0)},p(s,r){e=s;const a={};r&2&&(a.student=e[13]),l.$set(a),(!i||r&3&&n!==(n=e[12]===e[0][0]&&e[15]===e[0][1]))&&p(t,"aria-current",n)},i(s){i||(M(l.$$.fragment,s),i=!0)},o(s){j(l.$$.fragment,s),i=!1},d(s){s&&E(t),x(l),o=!1,u()}}}function Ue(e,t){let l,n,i=t[10].title+"",o,u,_,s,r=z(t[10].members),a=[];for(let h=0;h<r.length;h+=1)a[h]=He(Fe(t,r,h));const d=h=>j(a[h],1,1,()=>{a[h]=null});return{key:e,first:null,c(){l=b("fieldset"),n=b("legend"),o=O(i),u=B(),_=b("div");for(let h=0;h<a.length;h+=1)a[h].c();p(_,"class","team svelte-lavo2d"),p(l,"class","box-part svelte-lavo2d"),I(l,"order",(t[12]+1)*2),this.first=l},m(h,c){N(h,l,c),v(l,n),v(n,o),v(l,u),v(l,_);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(_,null);s=!0},p(h,c){if(t=h,(!s||c&2)&&i!==(i=t[10].title+"")&&H(o,i),c&19){r=z(t[10].members);let f;for(f=0;f<r.length;f+=1){const g=Fe(t,r,f);a[f]?(a[f].p(g,c),M(a[f],1)):(a[f]=He(g),a[f].c(),M(a[f],1),a[f].m(_,null))}for(X(),f=r.length;f<a.length;f+=1)d(f);Y()}(!s||c&2)&&I(l,"order",(t[12]+1)*2)},i(h){if(!s){for(let c=0;c<r.length;c+=1)M(a[c]);s=!0}},o(h){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)j(a[c]);s=!1},d(h){h&&E(l),ne(a,h)}}}function At(e){let t,l,n,i,o,u,_,s,r,a,d,h=[],c=new Map,f,g,m,y,q,S=z(e[1]);const w=$=>$[10].title;for(let $=0;$<S.length;$+=1){let k=Ie(e,S,$),T=w(k);c.set(T,h[$]=Ue(T,k))}return{c(){t=b("div"),l=b("label"),n=b("input"),i=B(),o=b("span"),o.textContent="🢁",u=B(),_=b("label"),s=b("input"),r=B(),a=b("span"),a.textContent="🢂🢀",d=B();for(let $=0;$<h.length;$+=1)h[$].c();f=B(),g=b("button"),g.textContent="↻",p(n,"type","checkbox"),p(n,"accesskey","a"),p(l,"title","pin"),p(l,"class","pin-ctrl ctrl svelte-lavo2d"),p(s,"type","checkbox"),p(_,"title","zoom"),p(_,"class","zoom-ctrl ctrl svelte-lavo2d"),p(g,"class","reset-btn svelte-lavo2d"),p(t,"class","box svelte-lavo2d"),fe(t,"pin",e[2]),fe(t,"zoom",e[3])},m($,k){N($,t,k),v(t,l),v(l,n),n.checked=e[2],v(l,i),v(l,o),v(t,u),v(t,_),v(_,s),s.checked=e[3],v(_,r),v(_,a),v(t,d);for(let T=0;T<h.length;T+=1)h[T]&&h[T].m(t,null);v(t,f),v(t,g),m=!0,y||(q=[D(n,"change",e[6]),D(s,"change",e[7]),D(g,"click",e[5])],y=!0)},p($,[k]){k&4&&(n.checked=$[2]),k&8&&(s.checked=$[3]),k&19&&(S=z($[1]),X(),h=xe(h,k,w,1,$,S,c,t,Ze,Ue,f,Ie),Y()),(!m||k&4)&&fe(t,"pin",$[2]),(!m||k&8)&&fe(t,"zoom",$[3])},i($){if(!m){for(let k=0;k<S.length;k+=1)M(h[k]);m=!0}},o($){for(let k=0;k<h.length;k+=1)j(h[k]);m=!1},d($){$&&E(t);for(let k=0;k<h.length;k+=1)h[k].d();y=!1,V(q)}}}function Et(e,t,l){let{focus:n}=t,{teams:i}=t;const o=Xe();function u(c,f){o("focus",{teamIndex:c,memberIndex:f})}let _=document.documentElement.clientHeight>700,s=!0;function r(){o("reset")}function a(){_=this.checked,l(2,_)}function d(){s=this.checked,l(3,s)}const h=(c,f)=>u(c,f);return e.$$set=c=>{"focus"in c&&l(0,n=c.focus),"teams"in c&&l(1,i=c.teams)},[n,i,_,s,u,r,a,d,h]}class Pt extends re{constructor(t){super(),se(this,t,Et,At,le,{focus:0,teams:1})}}function Ve(e){let t,l;return t=new Bt({props:{students:e[0]}}),t.$on("select",e[3]),{c(){ie(t.$$.fragment)},m(n,i){Z(t,n,i),l=!0},p(n,i){const o={};i&1&&(o.students=n[0]),t.$set(o)},i(n){l||(M(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){x(t,n)}}}function Nt(e){let t,l,n,i,o,u,_,s=e[0].length&&Ve(e);return i=new Pt({props:{focus:e[2],teams:e[1]}}),i.$on("focus",e[5]),i.$on("reset",e[4]),{c(){s&&s.c(),t=B(),l=b("footer"),l.innerHTML='<hr/> <details open=""><summary>Tips:</summary> <ul><li>`?name=xxx`: name filter</li> <li>alt+q: focus name filter</li> <li>alt+a: toggle boxing visibility</li> <li>w,a,s,d: navigating boxing focus</li></ul></details> <div>data &amp; image come from\n		<a href="https://github.com/lonqie/SchaleDB">https://github.com/lonqie/SchaleDB</a></div> <hr/> <h1>Blue Archive students filter</h1>',n=B(),ie(i.$$.fragment),p(l,"class","svelte-7gunl4")},m(r,a){s&&s.m(r,a),N(r,t,a),N(r,l,a),N(r,n,a),Z(i,r,a),o=!0,u||(_=D(window,"keydown",e[6]),u=!0)},p(r,[a]){r[0].length?s?(s.p(r,a),a&1&&M(s,1)):(s=Ve(r),s.c(),M(s,1),s.m(t.parentNode,t)):s&&(X(),j(s,1,1,()=>{s=null}),Y());const d={};a&4&&(d.focus=r[2]),a&2&&(d.teams=r[1]),i.$set(d)},i(r){o||(M(s),M(i.$$.fragment,r),o=!0)},o(r){j(s),j(i.$$.fragment,r),o=!1},d(r){r&&(E(t),E(l),E(n)),s&&s.d(r),x(i,r),u=!1,_()}}}function Ge(){return[{title:"⚔️ Attacker",members:new Array(6).fill({})},{title:"🛡️ Defender",members:new Array(6).fill({})}]}function Mt(e,t,l){let n=[],i=Ge(),o=[0,0];Qe(async()=>{l(0,n=await u())});async function u(){return await fetch(mt).then(c=>c.json())}function _(h){var f;let c=(f=h.detail)==null?void 0:f.student;c&&l(1,i[o[0]].members[o[1]]=c,i)}function s(){l(1,i=Ge())}function r(h){l(2,o=[h.detail.teamIndex,h.detail.memberIndex])}function a(h){let c=h.dir_y||0,f=h.dir_x||0;l(2,o=[(o[0]+c+2)%2,(o[1]+f+6)%6])}function d(h){switch(h.key){case"d":a({dir_x:1});break;case"a":a({dir_x:-1});break;case"w":a({dir_y:-1});break;case"s":a({dir_y:1});break}}return[n,i,o,_,s,r,d]}class Rt extends re{constructor(t){super(),se(this,t,Mt,Nt,le,{})}}new Rt({target:document.getElementById("app")});

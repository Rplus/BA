var Me=Object.defineProperty;var De=(e,t,l)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var ue=(e,t,l)=>(De(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=l(i);fetch(i.href,r)}})();function le(){}function Re(e){return e()}function ve(){return Object.create(null)}function ie(e){e.forEach(Re)}function Le(e){return typeof e=="function"}function ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let se;function ge(e,t){return e===t?!0:(se||(se=document.createElement("a")),se.href=t,e===se.href)}function Ie(e){return Object.keys(e).length===0}function o(e,t){e.appendChild(t)}function M(e,t,l){e.insertBefore(t,l||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function m(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function j(){return I(" ")}function Oe(){return I("")}function W(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function s(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Fe(e){return e===""?null:+e}function He(e){return Array.from(e.childNodes)}function V(e,t){t=""+t,e.data!==t&&(e.data=t)}function oe(e,t){e.value=t??""}function z(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}let _e;function te(e){_e=e}const X=[],fe=[];let Y=[];const be=[],Ue=Promise.resolve();let de=!1;function Ve(){de||(de=!0,Ue.then(Ce))}function he(e){Y.push(e)}const ce=new Set;let Q=0;function Ce(){if(Q!==0)return;const e=_e;do{try{for(;Q<X.length;){const t=X[Q];Q++,te(t),Ge(t.$$)}}catch(t){throw X.length=0,Q=0,t}for(te(null),X.length=0,Q=0;fe.length;)fe.pop()();for(let t=0;t<Y.length;t+=1){const l=Y[t];ce.has(l)||(ce.add(l),l())}Y.length=0}while(X.length);for(;be.length;)be.pop()();de=!1,ce.clear(),te(e)}function Ge(e){if(e.fragment!==null){e.update(),ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(he)}}function Ke(e){const t=[],l=[];Y.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),Y=t}const Je=new Set;function Qe(e,t){e&&e.i&&(Je.delete(e),e.i(t))}function F(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function We(e,t,l){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,l),he(()=>{const r=e.$$.on_mount.map(Re).filter(Le);e.$$.on_destroy?e.$$.on_destroy.push(...r):ie(r),e.$$.on_mount=[]}),i.forEach(he)}function Xe(e,t){const l=e.$$;l.fragment!==null&&(Ke(l.after_update),ie(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Ye(e,t){e.$$.dirty[0]===-1&&(X.push(e),Ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ze(e,t,l,n,i,r,u,p=[-1]){const f=_e;te(e);const a=e.$$={fragment:null,ctx:[],props:r,update:le,not_equal:i,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:ve(),dirty:p,skip_bound:!1,root:t.target||f.$$.root};u&&u(a.root);let h=!1;if(a.ctx=l?l(e,t.props||{},(c,v,...d)=>{const y=d.length?d[0]:v;return a.ctx&&i(a.ctx[c],a.ctx[c]=y)&&(!a.skip_bound&&a.bound[c]&&a.bound[c](y),h&&Ye(e,c)),v}):[],a.update(),h=!0,ie(a.before_update),a.fragment=n?n(a.ctx):!1,t.target){if(t.hydrate){const c=He(t.target);a.fragment&&a.fragment.l(c),c.forEach(O)}else a.fragment&&a.fragment.c();t.intro&&Qe(e.$$.fragment),We(e,t.target,t.anchor),Ce()}te(f)}class xe{constructor(){ue(this,"$$");ue(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=le}$on(t,l){if(!Le(l))return le;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(et);const tt="/BA/assets/students-6adbf1ec.json";function ye(e,t,l){const n=e.slice();return n[24]=t[l],n[26]=l,n}function ke(e,t,l){const n=e.slice();return n[27]=t[l],n}function Te(e,t,l){const n=e.slice();return n[30]=t[l],n[32]=l,n}function je(e,t,l){const n=e.slice();return n[33]=t[l],n}function we(e,t,l){const n=e.slice();return n[36]=t[l],n[37]=t,n[38]=l,n}function Ne(e){let t,l,n,i,r=e[7](e[36].label)+"",u,p,f;function a(){e[10].call(n,e[37],e[38])}return{c(){t=m("div"),l=m("label"),n=m("input"),i=j(),u=I(r),s(n,"type","checkbox")},m(h,c){M(h,t,c),o(t,l),o(l,n),n.checked=e[36].value,o(l,i),o(l,u),p||(f=W(n,"change",a),p=!0)},p(h,c){e=h,c[0]&2&&(n.checked=e[36].value),c[0]&2&&r!==(r=e[7](e[36].label)+"")&&V(u,r)},d(h){h&&O(t),p=!1,f()}}}function Se(e){let t,l,n=e[7](e[33].prop)+"",i,r,u,p=F(e[33].filters),f=[];for(let a=0;a<p.length;a+=1)f[a]=Ne(we(e,p,a));return{c(){t=m("fieldset"),l=m("legend"),i=I(n),r=j(),u=m("div");for(let a=0;a<f.length;a+=1)f[a].c();s(t,"class","svelte-4jv4th")},m(a,h){M(a,t,h),o(t,l),o(l,i),o(t,r),o(t,u);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(u,null)},p(a,h){if(h[0]&2&&n!==(n=a[7](a[33].prop)+"")&&V(i,n),h[0]&130){p=F(a[33].filters);let c;for(c=0;c<p.length;c+=1){const v=we(a,p,c);f[c]?f[c].p(v,h):(f[c]=Ne(v),f[c].c(),f[c].m(u,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=p.length}},d(a){a&&O(t),ne(f,a)}}}function Pe(e){var y;let t,l=e[7]((y=e[27][0])==null?void 0:y.SquadType)+"",n,i,r,u=e[7](e[6][e[26]])+"",p,f,a,h,c,v=F(e[27]),d=[];for(let _=0;_<v.length;_+=1)d[_]=Be(Te(e,v,_));return{c(){var _,T;t=m("h3"),n=I(l),i=j(),r=m("h3"),p=I(u),f=j(),a=m("div");for(let P=0;P<d.length;P+=1)d[P].c();h=j(),s(t,"class","th svelte-4jv4th"),z(t,"grid-area",((_=e[27][0])==null?void 0:_.SquadType)+"-title"),s(r,"class","th svelte-4jv4th"),z(r,"grid-area",e[6][e[26]]+"-title"),s(a,"class","cell svelte-4jv4th"),s(a,"data-squad",c=(T=e[27][0])==null?void 0:T.SquadType),s(a,"data-bullet",e[6][e[26]])},m(_,T){M(_,t,T),o(t,n),M(_,i,T),M(_,r,T),o(r,p),M(_,f,T),M(_,a,T);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(a,null);o(a,h)},p(_,T){var P,N,S;if(T[0]&4&&l!==(l=_[7]((P=_[27][0])==null?void 0:P.SquadType)+"")&&V(n,l),T[0]&4&&z(t,"grid-area",((N=_[27][0])==null?void 0:N.SquadType)+"-title"),T[0]&52){v=F(_[27]);let w;for(w=0;w<v.length;w+=1){const C=Te(_,v,w);d[w]?d[w].p(C,T):(d[w]=Be(C),d[w].c(),d[w].m(a,h))}for(;w<d.length;w+=1)d[w].d(1);d.length=v.length}T[0]&4&&c!==(c=(S=_[27][0])==null?void 0:S.SquadType)&&s(a,"data-squad",c)},d(_){_&&(O(t),O(i),O(r),O(f),O(a)),ne(d,_)}}}function $e(e){let t,l,n,i,r,u,p,f;return{c(){t=m("div"),l=m("div"),r=j(),u=m("div"),s(l,"class",n="icon icon-"+e[30].BulletType+" svelte-4jv4th"),z(l,"background-image","url('"+Z+"/ui/Type_Attack_s.png')"),s(l,"title",i=e[30].BulletType),s(u,"class",p="icon icon-"+e[30].ArmorType+" svelte-4jv4th"),z(u,"background-image","url('"+Z+"/ui/Type_Defense_s.png')"),s(u,"title",f=e[30].ArmorType),s(t,"class","icons svelte-4jv4th")},m(a,h){M(a,t,h),o(t,l),o(t,r),o(t,u)},p(a,h){h[0]&4&&n!==(n="icon icon-"+a[30].BulletType+" svelte-4jv4th")&&s(l,"class",n),h[0]&4&&i!==(i=a[30].BulletType)&&s(l,"title",i),h[0]&4&&p!==(p="icon icon-"+a[30].ArmorType+" svelte-4jv4th")&&s(u,"class",p),h[0]&4&&f!==(f=a[30].ArmorType)&&s(u,"title",f)},d(a){a&&O(t)}}}function Ae(e){let t,l,n,i,r,u,p=e[30].Name_tw+"",f,a,h,c,v=e[30].PathName+"",d,y,_,T,P,N,S=e[30].Name_jp+"",w,C;return{c(){t=m("div"),l=m("div"),n=m("div"),u=j(),f=I(p),a=j(),h=m("div"),c=m("a"),d=I(v),_=j(),T=m("br"),P=j(),N=m("a"),w=I(S),s(n,"class",i="icon icon-"+e[30].TacticRole+" icon-role svelte-4jv4th"),z(n,"background-image","url('"+Z+"/ui/Role_"+e[30].TacticRole+".png')"),s(n,"title",r=e[30].TacticRole),s(l,"class","name-inner svelte-4jv4th"),s(c,"href",y="https://schale.gg/?chara="+e[30].PathName),s(c,"target","schale.gg"),s(c,"class","svelte-4jv4th"),s(N,"href",C="https://bluearchive.wikiru.jp/?"+e[30].Name_jp+"#Profile"),s(N,"target","wikiru"),s(N,"class","svelte-4jv4th"),s(h,"class","tip svelte-4jv4th"),s(t,"class","name svelte-4jv4th")},m(A,E){M(A,t,E),o(t,l),o(l,n),o(l,u),o(l,f),o(t,a),o(t,h),o(h,c),o(c,d),o(h,_),o(h,T),o(h,P),o(h,N),o(N,w)},p(A,E){E[0]&4&&i!==(i="icon icon-"+A[30].TacticRole+" icon-role svelte-4jv4th")&&s(n,"class",i),E[0]&4&&z(n,"background-image","url('"+Z+"/ui/Role_"+A[30].TacticRole+".png')"),E[0]&4&&r!==(r=A[30].TacticRole)&&s(n,"title",r),E[0]&4&&p!==(p=A[30].Name_tw+"")&&V(f,p),E[0]&4&&v!==(v=A[30].PathName+"")&&V(d,v),E[0]&4&&y!==(y="https://schale.gg/?chara="+A[30].PathName)&&s(c,"href",y),E[0]&4&&S!==(S=A[30].Name_jp+"")&&V(w,S),E[0]&4&&C!==(C="https://bluearchive.wikiru.jp/?"+A[30].Name_jp+"#Profile")&&s(N,"href",C)},d(A){A&&O(t)}}}function Be(e){let t,l,n,i,r,u,p,f,a,h,c,v=e[5]&&$e(e),d=e[4]>60&&Ae(e);return{c(){t=m("div"),l=m("img"),r=j(),v&&v.c(),u=j(),d&&d.c(),s(l,"class","avatar svelte-4jv4th"),ge(l.src,n=Z+"student/collection/"+e[30].CollectionTexture+".webp")||s(l,"src",n),s(l,"loading","lazy"),s(l,"alt",i=e[30].Name_tw),s(t,"class","student svelte-4jv4th"),s(t,"data-name",p=e[30].Name_tw),s(t,"data-position",f=e[30].Position),s(t,"data-armortype",a=e[30].ArmorType),s(t,"data-bullettype",h=e[30].BulletType),s(t,"data-tacticrole",c=e[30].TacticRole)},m(y,_){M(y,t,_),o(t,l),o(t,r),v&&v.m(t,null),o(t,u),d&&d.m(t,null)},p(y,_){_[0]&4&&!ge(l.src,n=Z+"student/collection/"+y[30].CollectionTexture+".webp")&&s(l,"src",n),_[0]&4&&i!==(i=y[30].Name_tw)&&s(l,"alt",i),y[5]?v?v.p(y,_):(v=$e(y),v.c(),v.m(t,u)):v&&(v.d(1),v=null),y[4]>60?d?d.p(y,_):(d=Ae(y),d.c(),d.m(t,null)):d&&(d.d(1),d=null),_[0]&4&&p!==(p=y[30].Name_tw)&&s(t,"data-name",p),_[0]&4&&f!==(f=y[30].Position)&&s(t,"data-position",f),_[0]&4&&a!==(a=y[30].ArmorType)&&s(t,"data-armortype",a),_[0]&4&&h!==(h=y[30].BulletType)&&s(t,"data-bullettype",h),_[0]&4&&c!==(c=y[30].TacticRole)&&s(t,"data-tacticrole",c)},d(y){y&&O(t),v&&v.d(),d&&d.d()}}}function Ee(e){let t,l=e[27].length&&Pe(e);return{c(){l&&l.c(),t=Oe()},m(n,i){l&&l.m(n,i),M(n,t,i)},p(n,i){n[27].length?l?l.p(n,i):(l=Pe(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(n){n&&O(t),l&&l.d(n)}}}function qe(e){let t,l=F(e[24]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Ee(ke(e,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=Oe()},m(i,r){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(i,r);M(i,t,r)},p(i,r){if(r[0]&244){l=F(i[24]);let u;for(u=0;u<l.length;u+=1){const p=ke(i,l,u);n[u]?n[u].p(p,r):(n[u]=Ee(p),n[u].c(),n[u].m(t.parentNode,t))}for(;u<n.length;u+=1)n[u].d(1);n.length=l.length}},d(i){i&&O(t),ne(n,i)}}}function lt(e){let t,l,n,i,r,u,p,f,a,h,c,v,d,y,_,T,P,N,S,w,C,A,E,H,G,U,k,B,$,x,q,pe,ae,re,me,K=F(e[1]),R=[];for(let g=0;g<K.length;g+=1)R[g]=Se(je(e,K,g));let J=F(e[2]),L=[];for(let g=0;g<J.length;g+=1)L[g]=qe(ye(e,J,g));return{c(){t=m("main"),l=m("div"),n=j(),i=m("details"),r=m("summary"),r.textContent="Filters",u=j(),p=m("form");for(let g=0;g<R.length;g+=1)R[g].c();f=j(),a=m("div"),h=m("fieldset"),c=m("legend"),c.textContent="Name",v=j(),d=m("input"),y=j(),_=m("fieldset"),T=m("legend"),T.textContent="圖片尺寸",P=j(),N=m("div"),S=m("input"),w=j(),C=I(e[4]),A=I("px"),E=j(),H=m("div"),G=m("label"),U=m("input"),k=I(" 顯示圖示"),B=j(),$=m("input"),x=j(),q=m("div");for(let g=0;g<L.length;g+=1)L[g].c();pe=j(),ae=m("footer"),ae.innerHTML='<hr/> <h1>Blue Archive students filter</h1> <hr/> <details open=""><summary>url para:</summary> <ul class="svelte-4jv4th"><li>`name=xxx`: name filter</li> <li>`size=96`: image size</li> <li>`icon=1`: show type icon</li></ul></details> <hr/>\n\n    data &amp; image come from <a href="https://github.com/lonqie/SchaleDB">https://github.com/lonqie/SchaleDB</a>',s(l,"class","dynamic-style"),s(r,"class","svelte-4jv4th"),s(d,"type","search"),s(d,"placeholder","name"),d.autofocus=!0,s(d,"accesskey","q"),s(h,"class","svelte-4jv4th"),s(S,"type","range"),s(S,"step","12"),s(S,"min","48"),s(S,"max","96"),z(N,"display","inline-flex"),s(_,"class","svelte-4jv4th"),s(U,"type","checkbox"),s($,"type","reset"),$.value="Reset",z(H,"display","flex"),z(H,"justify-content","space-between"),s(p,"class","filter-form svelte-4jv4th"),s(i,"class","filters svelte-4jv4th"),i.open=!0,s(q,"class","table svelte-4jv4th"),z(q,"--avatar-size",e[4]),s(q,"data-name",e[0]),s(ae,"class","svelte-4jv4th")},m(g,D){M(g,t,D),o(t,l),e[9](l),o(t,n),o(t,i),o(i,r),o(i,u),o(i,p);for(let b=0;b<R.length;b+=1)R[b]&&R[b].m(p,null);o(p,f),o(p,a),o(a,h),o(h,c),o(h,v),o(h,d),oe(d,e[0]),o(a,y),o(a,_),o(_,T),o(_,P),o(_,N),o(N,S),oe(S,e[4]),o(N,w),o(N,C),o(N,A),o(a,E),o(a,H),o(H,G),o(G,U),U.checked=e[5],o(G,k),o(H,B),o(H,$),o(t,x),o(t,q);for(let b=0;b<L.length;b+=1)L[b]&&L[b].m(q,null);o(t,pe),o(t,ae),d.focus(),re||(me=[W(d,"input",e[11]),W(S,"change",e[12]),W(S,"input",e[12]),W(U,"change",e[13]),W(p,"reset",e[8])],re=!0)},p(g,D){if(D[0]&130){K=F(g[1]);let b;for(b=0;b<K.length;b+=1){const ee=je(g,K,b);R[b]?R[b].p(ee,D):(R[b]=Se(ee),R[b].c(),R[b].m(p,f))}for(;b<R.length;b+=1)R[b].d(1);R.length=K.length}if(D[0]&1&&d.value!==g[0]&&oe(d,g[0]),D[0]&16&&oe(S,g[4]),D[0]&16&&V(C,g[4]),D[0]&32&&(U.checked=g[5]),D[0]&244){J=F(g[2]);let b;for(b=0;b<J.length;b+=1){const ee=ye(g,J,b);L[b]?L[b].p(ee,D):(L[b]=qe(ee),L[b].c(),L[b].m(q,null))}for(;b<L.length;b+=1)L[b].d(1);L.length=J.length}D[0]&16&&z(q,"--avatar-size",g[4]),D[0]&1&&s(q,"data-name",g[0])},i:le,o:le,d(g){g&&O(t),e[9](null),ne(R,g),ne(L,g),re=!1,ie(me)}}}const Z="https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/";function nt(e,t,l){let n=["TacticRole","Position","BulletType","ArmorType"],i=["Explosion","Pierce","Mystic","Sonic"],r=[],u,p=new URLSearchParams(location.search),f=p.get("name"),a=[],h={name:"",checkbox:""},c=+p.get("size")||96,v=!!+p.get("icon");T();function d(){if(!u)return;let k=h.name+h.checkbox;l(3,u.innerHTML=k?`<style>${k}</style>`:"",u)}function y(){let k=f==null?void 0:f.trim();h.name=k?`.student.student.student.student:not([data-name*="${k}"]) { display: none; }`:"",d()}function _(){let k=a.map($=>$.filters.filter(q=>q.value).length?$.filters.filter(q=>!q.value).map(q=>`[data-${$.prop.toLowerCase()}="${q.label}"]`):void 0).flat().filter(Boolean),B=k.length?k.map($=>`.student${$}`).join()+"{ display: none !important; }":"";h.checkbox=B,d()}async function T(){let k=await fetch(tt).then(B=>B.json());N(k),P(k)}function P(k){l(1,a=n.map(B=>({prop:B,filters:[...new Set(k.map($=>$[B]))].map($=>({label:$,value:!1}))})))}function N(k){l(2,r=[]),k.forEach(B=>{let $=i.findIndex(x=>x===B.BulletType);r[$]||l(2,r[$]=[[],[]],r),r[$][B.SquadType==="Main"?0:1].push(B)})}function S(k=""){return w[k]||k}let w={Explosion:"爆發",Pierce:"貫穿",Mystic:"神秘",Sonic:"振動",Main:"前排",Support:"後排",TacticRole:"作用",Position:"位置",BulletType:"攻屬",ArmorType:"防屬",DamageDealer:"輸出",Tanker:"坦克",Supporter:"輔助",Healer:"治療",Vehicle:"T.S.",Back:"遠距",Front:"近距",Middle:"中距",LightArmor:"輕甲",HeavyArmor:"重甲",Unarmed:"特殊",ElasticArmor:"彈力"};function C(){l(0,f=""),a.forEach(k=>{k.filters.forEach(B=>{B.value=!1})}),l(1,a)}function A(k){fe[k?"unshift":"push"](()=>{u=k,l(3,u)})}function E(k,B){k[B].value=this.checked,l(1,a)}function H(){f=this.value,l(0,f)}function G(){c=Fe(this.value),l(4,c)}function U(){v=this.checked,l(5,v)}return e.$$.update=()=>{e.$$.dirty[0]&1&&y(),e.$$.dirty[0]&2&&_()},[f,a,r,u,c,v,i,S,C,A,E,H,G,U]}class it extends xe{constructor(t){super(),Ze(this,t,nt,lt,ze,{},null,[-1,-1])}}new it({target:document.getElementById("app")});

var rt=Object.defineProperty;var ot=(e,t,l)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var pe=(e,t,l)=>(ot(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function l(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=l(i);fetch(i.href,o)}})();function U(){}function Xe(e){return e()}function qe(){return Object.create(null)}function F(e){e.forEach(Xe)}function Ye(e){return typeof e=="function"}function le(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ce;function Be(e,t){return e===t?!0:(ce||(ce=document.createElement("a")),ce.href=t,e===ce.href)}function at(e){return Object.keys(e).length===0}function v(e,t){e.appendChild(t)}function N(e,t,l){e.insertBefore(t,l||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function b(e){return document.createElement(e)}function z(e){return document.createTextNode(e)}function A(){return z(" ")}function ut(){return z("")}function O(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function ge(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function p(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function ct(e){return Array.from(e.childNodes)}function H(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ae(e,t){e.value=t??""}function I(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function fe(e,t,l){e.classList.toggle(t,!!l)}function ft(e,t,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:l,cancelable:n})}let te;function ee(e){te=e}function Ze(){if(!te)throw new Error("Function called outside component initialization");return te}function xe(e){Ze().$$.on_mount.push(e)}function et(){const e=Ze();return(t,l,{cancelable:n=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=ft(t,l,{cancelable:n});return i.slice().forEach(a=>{a.call(e,o)}),!o.defaultPrevented}return!0}}function ve(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(n=>n.call(this,t))}const J=[],ye=[];let Q=[];const Ee=[],dt=Promise.resolve();let be=!1;function ht(){be||(be=!0,dt.then(tt))}function ke(e){Q.push(e)}const me=new Set;let W=0;function tt(){if(W!==0)return;const e=te;do{try{for(;W<J.length;){const t=J[W];W++,ee(t),_t(t.$$)}}catch(t){throw J.length=0,W=0,t}for(ee(null),J.length=0,W=0;ye.length;)ye.pop()();for(let t=0;t<Q.length;t+=1){const l=Q[t];me.has(l)||(me.add(l),l())}Q.length=0}while(J.length);for(;Ee.length;)Ee.pop()();be=!1,me.clear(),ee(e)}function _t(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ke)}}function pt(e){const t=[],l=[];Q.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),Q=t}const de=new Set;let G;function X(){G={r:0,c:[],p:G}}function Y(){G.r||F(G.c),G=G.p}function M(e,t){e&&e.i&&(de.delete(e),e.i(t))}function j(e,t,l,n){if(e&&e.o){if(de.has(e))return;de.add(e),G.c.push(()=>{de.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function C(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function lt(e,t){j(e,1,1,()=>{t.delete(e.key)})}function nt(e,t,l,n,i,o,a,_,s,r,u,h){let f=e.length,c=o.length,d=f;const g={};for(;d--;)g[e[d].key]=d;const m=[],y=new Map,q=new Map,S=[];for(d=c;d--;){const T=h(i,o,d),B=l(T);let L=a.get(B);L?n&&S.push(()=>L.p(T,t)):(L=r(B,T),L.c()),y.set(B,m[d]=L),B in g&&q.set(B,Math.abs(d-g[B]))}const $=new Set,w=new Set;function k(T){M(T,1),T.m(_,u),a.set(T.key,T),u=T.first,c--}for(;f&&c;){const T=m[c-1],B=e[f-1],L=T.key,K=B.key;T===B?(u=T.first,f--,c--):y.has(K)?!a.has(L)||$.has(L)?k(T):w.has(K)?f--:q.get(L)>q.get(K)?(w.add(L),k(T)):($.add(K),f--):(s(B,a),f--)}for(;f--;){const T=e[f];y.has(T.key)||s(T,a)}for(;c;)k(m[c-1]);return F(S),m}function ie(e){e&&e.c()}function Z(e,t,l){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,l),ke(()=>{const o=e.$$.on_mount.map(Xe).filter(Ye);e.$$.on_destroy?e.$$.on_destroy.push(...o):F(o),e.$$.on_mount=[]}),i.forEach(ke)}function x(e,t){const l=e.$$;l.fragment!==null&&(pt(l.after_update),F(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function mt(e,t){e.$$.dirty[0]===-1&&(J.push(e),ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,l,n,i,o,a,_=[-1]){const s=te;ee(e);const r=e.$$={fragment:null,ctx:[],props:o,update:U,not_equal:i,bound:qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:qe(),dirty:_,skip_bound:!1,root:t.target||s.$$.root};a&&a(r.root);let u=!1;if(r.ctx=l?l(e,t.props||{},(h,f,...c)=>{const d=c.length?c[0]:f;return r.ctx&&i(r.ctx[h],r.ctx[h]=d)&&(!r.skip_bound&&r.bound[h]&&r.bound[h](d),u&&mt(e,h)),f}):[],r.update(),u=!0,F(r.before_update),r.fragment=n?n(r.ctx):!1,t.target){if(t.hydrate){const h=ct(t.target);r.fragment&&r.fragment.l(h),h.forEach(P)}else r.fragment&&r.fragment.c();t.intro&&M(e.$$.fragment),Z(e,t.target,t.anchor),tt()}ee(s)}class re{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){x(this,1),this.$destroy=U}$on(t,l){if(!Ye(l))return U;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!at(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gt);const vt="/BA/assets/students-5a9e1864.json",yt={Explosion:"爆發",Pierce:"貫穿",Mystic:"神秘",Sonic:"振動",Main:"前排",Support:"後排",School:"學園",TacticRole:"作用",Position:"射程",BulletType:"攻屬",ArmorType:"防屬",SquadType:"分類",DamageDealer:"輸出",Tanker:"坦克",Supporter:"輔助",Healer:"治療",Vehicle:"T.S.",Back:"遠距",Front:"近距",Middle:"中距",LightArmor:"輕甲",HeavyArmor:"重甲",Unarmed:"特殊",ElasticArmor:"彈力",Gehenna:"格黑娜",Millennium:"千年",Trinity:"三一",Abydos:"阿拜多斯",Shanhaijing:"山海經",Hyakkiyako:"百鬼夜行",RedWinter:"赤冬",Valkyrie:"女武神",ETC:"?",SRT:"SRT",Arius:"奧利斯"},it="https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images";function Pe(e){return`${it}/student/collection/${e}.webp`}function Ne(e){return`${it}/ui/Role_${e.TacticRole}.png`}function D(e=""){return yt[e]||e}function bt(e){let t;return{c(){t=b("div"),t.textContent="?",p(t,"class","empty svelte-tuawqy")},m(l,n){N(l,t,n)},p:U,d(l){l&&P(t)}}}function kt(e){let t,l,n,i,o,a,_=D(e[0].BulletType).slice(0,1)+"",s,r,u,h,f,c=D(e[0].ArmorType).slice(0,1)+"",d,g,m,y,q,S,$=e[0].Name_tw+"",w,k,T,B,L=e[0].PathName+"",K,oe,we,$e,Te,V,ae=e[0].Name_jp+"",he,ue,_e,Se;return{c(){t=b("img"),i=A(),o=b("div"),a=b("div"),s=z(_),h=A(),f=b("div"),d=z(c),y=A(),q=b("div"),S=b("div"),w=z($),k=A(),T=b("div"),B=b("a"),K=z(L),we=A(),$e=b("br"),Te=A(),V=b("a"),he=z(ae),p(t,"class","avatar svelte-tuawqy"),Be(t.src,l=Pe(e[0].Id))||p(t,"src",l),p(t,"alt",n=Me(e[0])),p(a,"class","icon color svelte-tuawqy"),p(a,"data-bullettype",r=e[0].BulletType),p(a,"title",u=e[1](e[0].BulletType)),p(f,"class","icon color svelte-tuawqy"),p(f,"data-armortype",g=e[0].ArmorType),p(f,"title",m=e[1](e[0].ArmorType)),p(o,"class","icons svelte-tuawqy"),p(S,"class","name-inner svelte-tuawqy"),p(B,"href",oe="https://schale.gg/?chara="+e[0].PathName),p(B,"target","schale.gg"),p(V,"href",ue="https://bluearchive.wikiru.jp/?"+e[0].Name_jp+"#Profile"),p(V,"target","wikiru"),p(T,"class","tip svelte-tuawqy"),p(q,"class","name svelte-tuawqy"),I(q,"--icon-role","url("+Ne(e[0])+")")},m(E,R){N(E,t,R),N(E,i,R),N(E,o,R),v(o,a),v(a,s),v(o,h),v(o,f),v(f,d),N(E,y,R),N(E,q,R),v(q,S),v(S,w),v(q,k),v(q,T),v(T,B),v(B,K),v(T,we),v(T,$e),v(T,Te),v(T,V),v(V,he),_e||(Se=[O(B,"click",ge(e[3])),O(V,"click",ge(e[2]))],_e=!0)},p(E,R){R&1&&!Be(t.src,l=Pe(E[0].Id))&&p(t,"src",l),R&1&&n!==(n=Me(E[0]))&&p(t,"alt",n),R&1&&_!==(_=D(E[0].BulletType).slice(0,1)+"")&&H(s,_),R&1&&r!==(r=E[0].BulletType)&&p(a,"data-bullettype",r),R&1&&u!==(u=E[1](E[0].BulletType))&&p(a,"title",u),R&1&&c!==(c=D(E[0].ArmorType).slice(0,1)+"")&&H(d,c),R&1&&g!==(g=E[0].ArmorType)&&p(f,"data-armortype",g),R&1&&m!==(m=E[1](E[0].ArmorType))&&p(f,"title",m),R&1&&$!==($=E[0].Name_tw+"")&&H(w,$),R&1&&L!==(L=E[0].PathName+"")&&H(K,L),R&1&&oe!==(oe="https://schale.gg/?chara="+E[0].PathName)&&p(B,"href",oe),R&1&&ae!==(ae=E[0].Name_jp+"")&&H(he,ae),R&1&&ue!==(ue="https://bluearchive.wikiru.jp/?"+E[0].Name_jp+"#Profile")&&p(V,"href",ue),R&1&&I(q,"--icon-role","url("+Ne(E[0])+")")},d(E){E&&(P(t),P(i),P(o),P(y),P(q)),_e=!1,F(Se)}}}function wt(e){let t;function l(o,a){return o[0].Id?kt:bt}let n=l(e),i=n(e);return{c(){t=b("div"),i.c(),p(t,"class","student svelte-tuawqy")},m(o,a){N(o,t,a),i.m(t,null)},p(o,[a]){n===(n=l(o))&&i?i.p(o,a):(i.d(1),i=n(o),i&&(i.c(),i.m(t,null)))},i:U,o:U,d(o){o&&P(t),i.d()}}}function Me(e){return`${e.Name_tw}, ${e.Name_jp}, ${e.PathName}`}function $t(e,t,l){let{student:n={}}=t;function i(_){return`${D(_)}, ${_}`}function o(_){ve.call(this,e,_)}function a(_){ve.call(this,e,_)}return e.$$set=_=>{"student"in _&&l(0,n=_.student)},[n,i,o,a]}class st extends re{constructor(t){super(),se(this,t,$t,wt,le,{student:0})}}function Re(e,t,l){const n=e.slice();return n[17]=t[l],n}function Le(e,t,l){const n=e.slice();return n[20]=t[l],n[21]=t,n[22]=l,n}function je(e){let t,l,n,i,o,a,_=D(e[20].label)+"",s,r,u,h;function f(){e[8].call(n,e[21],e[22])}return{c(){t=b("div"),l=b("label"),n=b("input"),i=A(),o=b("i"),a=A(),s=z(_),r=A(),p(n,"type","checkbox"),p(o,"class","label-icon"),I(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+e[20].label+".png')")},m(c,d){N(c,t,d),v(t,l),v(l,n),n.checked=e[20].value,v(l,i),v(l,o),v(l,a),v(l,s),v(t,r),u||(h=O(n,"change",f),u=!0)},p(c,d){e=c,d&2&&(n.checked=e[20].value),d&2&&_!==(_=D(e[20].label)+"")&&H(s,_),d&2&&I(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+e[20].label+".png')")},d(c){c&&P(t),u=!1,h()}}}function Ce(e){let t,l,n=D(e[17].prop)+"",i,o,a,_,s,r,u,h,f,c=C(e[17].filters),d=[];for(let g=0;g<c.length;g+=1)d[g]=je(Le(e,c,g));return{c(){t=b("fieldset"),l=b("legend"),i=z(n),o=A(),a=b("details"),_=b("summary"),s=A(),r=b("div");for(let g=0;g<d.length;g+=1)d[g].c();h=A(),p(_,"class","svelte-1q95fnr"),p(a,"class","filter-details svelte-1q95fnr"),a.open=u=e[17].filters.length<5,p(t,"class",f="filter-cate__"+e[17].prop+" svelte-1q95fnr")},m(g,m){N(g,t,m),v(t,l),v(l,i),v(t,o),v(t,a),v(a,_),v(a,s),v(a,r);for(let y=0;y<d.length;y+=1)d[y]&&d[y].m(r,null);v(t,h)},p(g,m){if(m&2&&n!==(n=D(g[17].prop)+"")&&H(i,n),m&2){c=C(g[17].filters);let y;for(y=0;y<c.length;y+=1){const q=Le(g,c,y);d[y]?d[y].p(q,m):(d[y]=je(q),d[y].c(),d[y].m(r,null))}for(;y<d.length;y+=1)d[y].d(1);d.length=c.length}m&2&&u!==(u=g[17].filters.length<5)&&(a.open=u),m&2&&f!==(f="filter-cate__"+g[17].prop+" svelte-1q95fnr")&&p(t,"class",f)},d(g){g&&P(t),ne(d,g)}}}function Tt(e){let t,l,n,i,o,a,_,s,r,u,h,f,c,d,g=C(e[1]),m=[];for(let y=0;y<g.length;y+=1)m[y]=Ce(Re(e,g,y));return{c(){t=b("div"),l=A(),n=b("form"),i=b("details"),o=b("summary"),a=z(`Filters
			`),_=b("label"),s=b("input"),r=A(),u=b("input"),h=A(),f=b("div");for(let y=0;y<m.length;y+=1)m[y].c();p(t,"class","dynamic-style"),p(s,"type","search"),p(s,"placeholder","name"),s.autofocus=!0,p(s,"accesskey","q"),p(u,"type","reset"),u.value="Reset",p(o,"class","filter-summary svelte-1q95fnr"),p(f,"class","flex svelte-1q95fnr"),i.open=!0,p(n,"class","filter-form svelte-1q95fnr")},m(y,q){N(y,t,q),e[6](t),N(y,l,q),N(y,n,q),v(n,i),v(i,o),v(o,a),v(o,_),v(_,s),Ae(s,e[0]),v(o,r),v(o,u),v(i,h),v(i,f);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(f,null);s.focus(),c||(d=[O(s,"keydown",ge(e[5])),O(s,"input",e[7]),O(n,"reset",e[3])],c=!0)},p(y,[q]){if(q&1&&s.value!==y[0]&&Ae(s,y[0]),q&2){g=C(y[1]);let S;for(S=0;S<g.length;S+=1){const $=Re(y,g,S);m[S]?m[S].p($,q):(m[S]=Ce($),m[S].c(),m[S].m(f,null))}for(;S<m.length;S+=1)m[S].d(1);m.length=g.length}},i:U,o:U,d(y){y&&(P(t),P(l),P(n)),e[6](null),ne(m,y),c=!1,F(d)}}}const De=".student-outer";function St(e,t,l){let{students:n}=t,i=new URLSearchParams(location.search),o,a=i.get("name")||"",_=["School","TacticRole","BulletType","ArmorType","SquadType","Position"],s=u(n),r={name:"",checkbox:""};function u($){return _.map(w=>({prop:w,filters:[...new Set($.map(k=>k[w]))].sort(h).map(k=>({label:k,value:!1}))}))}function h($,w){let k=D($),T=D(w),B=k.length,L=T.length;return B===L?0:L-B}function f(){let $=a==null?void 0:a.trim();r.name=$?`${De}:not([data-name*="${$}"]) { display: none; }`:"",d()}function c(){let $=s.map(k=>k.filters.filter(B=>B.value).length?k.filters.filter(B=>!B.value).map(B=>`[data-${k.prop.toLowerCase()}="${B.label}"]`):void 0).flat().filter(Boolean),w=$.length?$.map(k=>`${De}${k}`).join()+"{ display: none !important; }":"";r.checkbox=w,d()}function d(){if(!o)return;let $=r.name+r.checkbox;l(2,o.innerHTML=$?`<style>${$}</style>`:"",o)}function g(){l(0,a=""),s.forEach($=>{$.filters.forEach(w=>{w.value=!1})}),l(1,s)}xe(()=>{d()});function m($){ve.call(this,e,$)}function y($){ye[$?"unshift":"push"](()=>{o=$,l(2,o)})}function q(){a=this.value,l(0,a)}function S($,w){$[w].value=this.checked,l(1,s)}return e.$$set=$=>{"students"in $&&l(4,n=$.students)},e.$$.update=()=>{e.$$.dirty&1&&f(),e.$$.dirty&2&&c()},[a,s,o,g,n,m,y,q,S]}class qt extends re{constructor(t){super(),se(this,t,St,Tt,le,{students:4})}}function Oe(e,t,l){const n=e.slice();return n[8]=t[l],n}function ze(e,t,l){const n=e.slice();return n[11]=t[l],n}function Ie(e,t,l){const n=e.slice();return n[14]=t[l],n}function Fe(e,t){let l,n,i,o,a,_,s,r,u,h,f,c;n=new st({props:{student:t[14]}});function d(){return t[3](t[14])}return{key:e,first:null,c(){l=b("div"),ie(n.$$.fragment),p(l,"class","student-outer svelte-c6bdz8"),p(l,"data-name",i=t[14].Name_tw),p(l,"data-school",o=t[14].School),p(l,"data-position",a=t[14].Position),p(l,"data-armortype",_=t[14].ArmorType),p(l,"data-bullettype",s=t[14].BulletType),p(l,"data-squadtype",r=t[14].SquadType),p(l,"data-tacticrole",u=t[14].TacticRole),this.first=l},m(g,m){N(g,l,m),Z(n,l,null),h=!0,f||(c=O(l,"click",d),f=!0)},p(g,m){t=g;const y={};m&2&&(y.student=t[14]),n.$set(y),(!h||m&2&&i!==(i=t[14].Name_tw))&&p(l,"data-name",i),(!h||m&2&&o!==(o=t[14].School))&&p(l,"data-school",o),(!h||m&2&&a!==(a=t[14].Position))&&p(l,"data-position",a),(!h||m&2&&_!==(_=t[14].ArmorType))&&p(l,"data-armortype",_),(!h||m&2&&s!==(s=t[14].BulletType))&&p(l,"data-bullettype",s),(!h||m&2&&r!==(r=t[14].SquadType))&&p(l,"data-squadtype",r),(!h||m&2&&u!==(u=t[14].TacticRole))&&p(l,"data-tacticrole",u)},i(g){h||(M(n.$$.fragment,g),h=!0)},o(g){j(n.$$.fragment,g),h=!1},d(g){g&&P(l),x(n),f=!1,c()}}}function Ke(e){let t,l=[],n=new Map,i,o,a,_=C(e[11].members);const s=r=>r[14].PathName;for(let r=0;r<_.length;r+=1){let u=Ie(e,_,r),h=s(u);n.set(h,l[r]=Fe(h,u))}return{c(){t=b("div");for(let r=0;r<l.length;r+=1)l[r].c();i=A(),p(t,"class","cell svelte-c6bdz8"),p(t,"data-bullettype",o=D(e[8].BulletType)),I(t,"grid-area",e[11].SquadType+"-"+e[8].BulletType)},m(r,u){N(r,t,u);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);v(t,i),a=!0},p(r,u){u&6&&(_=C(r[11].members),X(),l=nt(l,u,s,1,r,_,n,t,lt,Fe,i,Ie),Y()),(!a||u&2&&o!==(o=D(r[8].BulletType)))&&p(t,"data-bullettype",o),(!a||u&2)&&I(t,"grid-area",r[11].SquadType+"-"+r[8].BulletType)},i(r){if(!a){for(let u=0;u<_.length;u+=1)M(l[u]);a=!0}},o(r){for(let u=0;u<l.length;u+=1)j(l[u]);a=!1},d(r){r&&P(t);for(let u=0;u<l.length;u+=1)l[u].d()}}}function He(e){let t,l,n=C(e[8].cxt),i=[];for(let a=0;a<n.length;a+=1)i[a]=Ke(ze(e,n,a));const o=a=>j(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=ut()},m(a,_){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(a,_);N(a,t,_),l=!0},p(a,_){if(_&6){n=C(a[8].cxt);let s;for(s=0;s<n.length;s+=1){const r=ze(a,n,s);i[s]?(i[s].p(r,_),M(i[s],1)):(i[s]=Ke(r),i[s].c(),M(i[s],1),i[s].m(t.parentNode,t))}for(X(),s=n.length;s<i.length;s+=1)o(s);Y()}},i(a){if(!l){for(let _=0;_<n.length;_+=1)M(i[_]);l=!0}},o(a){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)j(i[_]);l=!1},d(a){a&&P(t),ne(i,a)}}}function Bt(e){let t,l,n,i,o,a,_,s,r;l=new qt({props:{students:e[0]}});let u=C(e[1]),h=[];for(let c=0;c<u.length;c+=1)h[c]=He(Oe(e,u,c));const f=c=>j(h[c],1,1,()=>{h[c]=null});return{c(){t=b("div"),ie(l.$$.fragment),n=A(),i=b("div"),o=b("div"),o.textContent="前",a=A(),_=b("div"),_.textContent="後",s=A();for(let c=0;c<h.length;c+=1)h[c].c();p(o,"class","cell th svelte-c6bdz8"),I(o,"grid-area","Main-title"),p(_,"class","cell th svelte-c6bdz8"),I(_,"grid-area","Support-title"),p(i,"class","table svelte-c6bdz8")},m(c,d){N(c,t,d),Z(l,t,null),v(t,n),v(t,i),v(i,o),v(i,a),v(i,_),v(i,s);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(i,null);r=!0},p(c,[d]){const g={};if(d&1&&(g.students=c[0]),l.$set(g),d&6){u=C(c[1]);let m;for(m=0;m<u.length;m+=1){const y=Oe(c,u,m);h[m]?(h[m].p(y,d),M(h[m],1)):(h[m]=He(y),h[m].c(),M(h[m],1),h[m].m(i,null))}for(X(),m=u.length;m<h.length;m+=1)f(m);Y()}},i(c){if(!r){M(l.$$.fragment,c);for(let d=0;d<u.length;d+=1)M(h[d]);r=!0}},o(c){j(l.$$.fragment,c),h=h.filter(Boolean);for(let d=0;d<h.length;d+=1)j(h[d]);r=!1},d(c){c&&P(t),x(l),ne(h,c)}}}function At(e,t,l){let{students:n=[]}=t;const i=et();let o=["Explosion","Pierce","Mystic","Sonic"],a;s();function _(){l(1,a=o.map(h=>({BulletType:h,cxt:[{SquadType:"Main",members:[]},{SquadType:"Support",members:[]}]})))}function s(){_(),n.forEach(h=>{let f=o.findIndex(c=>c===h.BulletType);a[f].cxt[h.SquadType==="Main"?0:1].members.push(h)})}function r(h){i("select",{student:h})}const u=h=>r(h);return e.$$set=h=>{"students"in h&&l(0,n=h.students)},[n,a,r,u]}class Et extends re{constructor(t){super(),se(this,t,At,Bt,le,{students:0})}}function Ue(e,t,l){const n=e.slice();return n[10]=t[l],n[12]=l,n}function Ve(e,t,l){const n=e.slice();return n[13]=t[l],n[15]=l,n}function Ge(e){let t,l,n,i,o,a;l=new st({props:{student:e[13]}});function _(){return e[8](e[12],e[15])}return{c(){t=b("button"),ie(l.$$.fragment),p(t,"class","student-box svelte-u861hm"),p(t,"aria-current",n=e[12]===e[0][0]&&e[15]===e[0][1])},m(s,r){N(s,t,r),Z(l,t,null),i=!0,o||(a=O(t,"click",_),o=!0)},p(s,r){e=s;const u={};r&2&&(u.student=e[13]),l.$set(u),(!i||r&3&&n!==(n=e[12]===e[0][0]&&e[15]===e[0][1]))&&p(t,"aria-current",n)},i(s){i||(M(l.$$.fragment,s),i=!0)},o(s){j(l.$$.fragment,s),i=!1},d(s){s&&P(t),x(l),o=!1,a()}}}function We(e,t){let l,n,i=t[10].title+"",o,a,_,s,r=C(t[10].members),u=[];for(let f=0;f<r.length;f+=1)u[f]=Ge(Ve(t,r,f));const h=f=>j(u[f],1,1,()=>{u[f]=null});return{key:e,first:null,c(){l=b("fieldset"),n=b("legend"),o=z(i),a=A(),_=b("div");for(let f=0;f<u.length;f+=1)u[f].c();p(_,"class","team svelte-u861hm"),p(l,"class","box-part svelte-u861hm"),I(l,"order",(t[12]+1)*2),this.first=l},m(f,c){N(f,l,c),v(l,n),v(n,o),v(l,a),v(l,_);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(_,null);s=!0},p(f,c){if(t=f,(!s||c&2)&&i!==(i=t[10].title+"")&&H(o,i),c&19){r=C(t[10].members);let d;for(d=0;d<r.length;d+=1){const g=Ve(t,r,d);u[d]?(u[d].p(g,c),M(u[d],1)):(u[d]=Ge(g),u[d].c(),M(u[d],1),u[d].m(_,null))}for(X(),d=r.length;d<u.length;d+=1)h(d);Y()}(!s||c&2)&&I(l,"order",(t[12]+1)*2)},i(f){if(!s){for(let c=0;c<r.length;c+=1)M(u[c]);s=!0}},o(f){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)j(u[c]);s=!1},d(f){f&&P(l),ne(u,f)}}}function Pt(e){let t,l,n,i,o,a,_,s,r,u,h,f=[],c=new Map,d,g,m,y,q,S=C(e[1]);const $=w=>w[10].title;for(let w=0;w<S.length;w+=1){let k=Ue(e,S,w),T=$(k);c.set(T,f[w]=We(T,k))}return{c(){t=b("div"),l=b("label"),n=b("input"),i=A(),o=b("span"),o.textContent="🢁",a=A(),_=b("label"),s=b("input"),r=A(),u=b("span"),u.textContent="🢂🢀",h=A();for(let w=0;w<f.length;w+=1)f[w].c();d=A(),g=b("button"),g.textContent="↻",p(n,"type","checkbox"),p(n,"accesskey","a"),p(l,"title","pin"),p(l,"class","pin-ctrl ctrl svelte-u861hm"),p(s,"type","checkbox"),p(_,"title","zoom"),p(_,"class","zoom-ctrl ctrl svelte-u861hm"),p(g,"class","reset-btn svelte-u861hm"),p(t,"class","box svelte-u861hm"),fe(t,"pin",e[2]),fe(t,"zoom",e[3])},m(w,k){N(w,t,k),v(t,l),v(l,n),n.checked=e[2],v(l,i),v(l,o),v(t,a),v(t,_),v(_,s),s.checked=e[3],v(_,r),v(_,u),v(t,h);for(let T=0;T<f.length;T+=1)f[T]&&f[T].m(t,null);v(t,d),v(t,g),m=!0,y||(q=[O(n,"change",e[6]),O(s,"change",e[7]),O(g,"click",e[5])],y=!0)},p(w,[k]){k&4&&(n.checked=w[2]),k&8&&(s.checked=w[3]),k&19&&(S=C(w[1]),X(),f=nt(f,k,$,1,w,S,c,t,lt,We,d,Ue),Y()),(!m||k&4)&&fe(t,"pin",w[2]),(!m||k&8)&&fe(t,"zoom",w[3])},i(w){if(!m){for(let k=0;k<S.length;k+=1)M(f[k]);m=!0}},o(w){for(let k=0;k<f.length;k+=1)j(f[k]);m=!1},d(w){w&&P(t);for(let k=0;k<f.length;k+=1)f[k].d();y=!1,F(q)}}}function Nt(e,t,l){let{focus:n}=t,{teams:i}=t;const o=et();function a(c,d){o("focus",{teamIndex:c,memberIndex:d})}let _=document.documentElement.clientHeight>700,s=!0;function r(){o("reset")}function u(){_=this.checked,l(2,_)}function h(){s=this.checked,l(3,s)}const f=(c,d)=>a(c,d);return e.$$set=c=>{"focus"in c&&l(0,n=c.focus),"teams"in c&&l(1,i=c.teams)},[n,i,_,s,a,r,u,h,f]}class Mt extends re{constructor(t){super(),se(this,t,Nt,Pt,le,{focus:0,teams:1})}}function Je(e){let t,l;return t=new Et({props:{students:e[0]}}),t.$on("select",e[3]),{c(){ie(t.$$.fragment)},m(n,i){Z(t,n,i),l=!0},p(n,i){const o={};i&1&&(o.students=n[0]),t.$set(o)},i(n){l||(M(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){x(t,n)}}}function Rt(e){let t,l,n,i,o,a,_,s=e[0].length&&Je(e);return i=new Mt({props:{focus:e[2],teams:e[1]}}),i.$on("focus",e[5]),i.$on("reset",e[4]),{c(){s&&s.c(),t=A(),l=b("footer"),l.innerHTML='<hr/> <details open=""><summary>Tips:</summary> <ul><li>`?name=xxx`: name filter</li> <li>alt+q: focus name filter</li> <li>alt+a: toggle boxing visibility</li> <li>w,a,s,d: navigating boxing focus</li></ul></details> <div>data &amp; image come from\n		<a href="https://github.com/lonqie/SchaleDB">https://github.com/lonqie/SchaleDB</a></div> <hr/> <h1>Blue Archive students filter</h1>',n=A(),ie(i.$$.fragment),p(l,"class","svelte-7gunl4")},m(r,u){s&&s.m(r,u),N(r,t,u),N(r,l,u),N(r,n,u),Z(i,r,u),o=!0,a||(_=O(window,"keydown",e[6]),a=!0)},p(r,[u]){r[0].length?s?(s.p(r,u),u&1&&M(s,1)):(s=Je(r),s.c(),M(s,1),s.m(t.parentNode,t)):s&&(X(),j(s,1,1,()=>{s=null}),Y());const h={};u&4&&(h.focus=r[2]),u&2&&(h.teams=r[1]),i.$set(h)},i(r){o||(M(s),M(i.$$.fragment,r),o=!0)},o(r){j(s),j(i.$$.fragment,r),o=!1},d(r){r&&(P(t),P(l),P(n)),s&&s.d(r),x(i,r),a=!1,_()}}}function Qe(){return[{title:"⚔️ Attacker",members:new Array(6).fill({})},{title:"🛡️ Defender",members:new Array(6).fill({})}]}function Lt(e,t,l){let n=[],i=Qe(),o=[0,0];xe(async()=>{l(0,n=await a())});async function a(){return await fetch(vt).then(c=>c.json())}function _(f){var d;let c=(d=f.detail)==null?void 0:d.student;c&&l(1,i[o[0]].members[o[1]]=c,i)}function s(){l(1,i=Qe())}function r(f){l(2,o=[f.detail.teamIndex,f.detail.memberIndex])}function u(f){let c=f.dir_y||0,d=f.dir_x||0;l(2,o=[(o[0]+c+2)%2,(o[1]+d+6)%6])}function h(f){if(!(f.altKey||f.ctrlKey))switch(f.code){case"KeyD":u({dir_x:1});break;case"KeyA":u({dir_x:-1});break;case"KeyW":u({dir_y:-1});break;case"KeyS":u({dir_y:1});break}}return[n,i,o,_,s,r,h]}class jt extends re{constructor(t){super(),se(this,t,Lt,Rt,le,{})}}new jt({target:document.getElementById("app")});

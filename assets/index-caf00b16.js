var Me=Object.defineProperty;var De=(e,t,l)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var ue=(e,t,l)=>(De(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function l(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=l(i);fetch(i.href,u)}})();function le(){}function Re(e){return e()}function ve(){return Object.create(null)}function ie(e){e.forEach(Re)}function Le(e){return typeof e=="function"}function ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let se;function ge(e,t){return e===t?!0:(se||(se=document.createElement("a")),se.href=t,e===se.href)}function Ie(e){return Object.keys(e).length===0}function r(e,t){e.appendChild(t)}function M(e,t,l){e.insertBefore(t,l||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function p(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function j(){return I(" ")}function Oe(){return I("")}function W(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function o(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Fe(e){return e===""?null:+e}function He(e){return Array.from(e.childNodes)}function V(e,t){t=""+t,e.data!==t&&(e.data=t)}function oe(e,t){e.value=t??""}function z(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}let _e;function te(e){_e=e}const X=[],fe=[];let Y=[];const be=[],Ue=Promise.resolve();let de=!1;function Ve(){de||(de=!0,Ue.then(Ce))}function he(e){Y.push(e)}const ce=new Set;let Q=0;function Ce(){if(Q!==0)return;const e=_e;do{try{for(;Q<X.length;){const t=X[Q];Q++,te(t),Ge(t.$$)}}catch(t){throw X.length=0,Q=0,t}for(te(null),X.length=0,Q=0;fe.length;)fe.pop()();for(let t=0;t<Y.length;t+=1){const l=Y[t];ce.has(l)||(ce.add(l),l())}Y.length=0}while(X.length);for(;be.length;)be.pop()();de=!1,ce.clear(),te(e)}function Ge(e){if(e.fragment!==null){e.update(),ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(he)}}function Ke(e){const t=[],l=[];Y.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),Y=t}const Je=new Set;function Qe(e,t){e&&e.i&&(Je.delete(e),e.i(t))}function F(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function We(e,t,l){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,l),he(()=>{const u=e.$$.on_mount.map(Re).filter(Le);e.$$.on_destroy?e.$$.on_destroy.push(...u):ie(u),e.$$.on_mount=[]}),i.forEach(he)}function Xe(e,t){const l=e.$$;l.fragment!==null&&(Ke(l.after_update),ie(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Ye(e,t){e.$$.dirty[0]===-1&&(X.push(e),Ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ze(e,t,l,n,i,u,c,_=[-1]){const d=_e;te(e);const a=e.$$={fragment:null,ctx:[],props:u,update:le,not_equal:i,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:ve(),dirty:_,skip_bound:!1,root:t.target||d.$$.root};c&&c(a.root);let h=!1;if(a.ctx=l?l(e,t.props||{},(s,m,...f)=>{const k=f.length?f[0]:m;return a.ctx&&i(a.ctx[s],a.ctx[s]=k)&&(!a.skip_bound&&a.bound[s]&&a.bound[s](k),h&&Ye(e,s)),m}):[],a.update(),h=!0,ie(a.before_update),a.fragment=n?n(a.ctx):!1,t.target){if(t.hydrate){const s=He(t.target);a.fragment&&a.fragment.l(s),s.forEach(O)}else a.fragment&&a.fragment.c();t.intro&&Qe(e.$$.fragment),We(e,t.target,t.anchor),Ce()}te(d)}class xe{constructor(){ue(this,"$$");ue(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=le}$on(t,l){if(!Le(l))return le;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(et);const tt="/BA/assets/students-6adbf1ec.json";function ye(e,t,l){const n=e.slice();return n[24]=t[l],n[26]=l,n}function ke(e,t,l){const n=e.slice();return n[27]=t[l],n}function Te(e,t,l){const n=e.slice();return n[30]=t[l],n[32]=l,n}function je(e,t,l){const n=e.slice();return n[33]=t[l],n}function we(e,t,l){const n=e.slice();return n[36]=t[l],n[37]=t,n[38]=l,n}function Se(e){let t,l,n,i,u=e[7](e[36].label)+"",c,_,d;function a(){e[10].call(n,e[37],e[38])}return{c(){t=p("div"),l=p("label"),n=p("input"),i=j(),c=I(u),o(n,"type","checkbox")},m(h,s){M(h,t,s),r(t,l),r(l,n),n.checked=e[36].value,r(l,i),r(l,c),_||(d=W(n,"change",a),_=!0)},p(h,s){e=h,s[0]&2&&(n.checked=e[36].value),s[0]&2&&u!==(u=e[7](e[36].label)+"")&&V(c,u)},d(h){h&&O(t),_=!1,d()}}}function Pe(e){let t,l,n=e[7](e[33].prop)+"",i,u,c,_=F(e[33].filters),d=[];for(let a=0;a<_.length;a+=1)d[a]=Se(we(e,_,a));return{c(){t=p("fieldset"),l=p("legend"),i=I(n),u=j(),c=p("div");for(let a=0;a<d.length;a+=1)d[a].c();o(t,"class","svelte-4jv4th")},m(a,h){M(a,t,h),r(t,l),r(l,i),r(t,u),r(t,c);for(let s=0;s<d.length;s+=1)d[s]&&d[s].m(c,null)},p(a,h){if(h[0]&2&&n!==(n=a[7](a[33].prop)+"")&&V(i,n),h[0]&130){_=F(a[33].filters);let s;for(s=0;s<_.length;s+=1){const m=we(a,_,s);d[s]?d[s].p(m,h):(d[s]=Se(m),d[s].c(),d[s].m(c,null))}for(;s<d.length;s+=1)d[s].d(1);d.length=_.length}},d(a){a&&O(t),ne(d,a)}}}function $e(e){var k;let t,l=e[7]((k=e[27][0])==null?void 0:k.SquadType)+"",n,i,u,c=e[7](e[6][e[26]])+"",_,d,a,h,s,m=F(e[27]),f=[];for(let v=0;v<m.length;v+=1)f[v]=Be(Te(e,m,v));return{c(){var v,T;t=p("h3"),n=I(l),i=j(),u=p("h3"),_=I(c),d=j(),a=p("div");for(let $=0;$<f.length;$+=1)f[$].c();h=j(),o(t,"class","th svelte-4jv4th"),z(t,"grid-area",((v=e[27][0])==null?void 0:v.SquadType)+"-title"),o(u,"class","th svelte-4jv4th"),z(u,"grid-area",e[6][e[26]]+"-title"),o(a,"class","cell svelte-4jv4th"),o(a,"data-squad",s=(T=e[27][0])==null?void 0:T.SquadType),o(a,"data-bullet",e[6][e[26]])},m(v,T){M(v,t,T),r(t,n),M(v,i,T),M(v,u,T),r(u,_),M(v,d,T),M(v,a,T);for(let $=0;$<f.length;$+=1)f[$]&&f[$].m(a,null);r(a,h)},p(v,T){var $,S,P;if(T[0]&4&&l!==(l=v[7](($=v[27][0])==null?void 0:$.SquadType)+"")&&V(n,l),T[0]&4&&z(t,"grid-area",((S=v[27][0])==null?void 0:S.SquadType)+"-title"),T[0]&52){m=F(v[27]);let w;for(w=0;w<m.length;w+=1){const C=Te(v,m,w);f[w]?f[w].p(C,T):(f[w]=Be(C),f[w].c(),f[w].m(a,h))}for(;w<f.length;w+=1)f[w].d(1);f.length=m.length}T[0]&4&&s!==(s=(P=v[27][0])==null?void 0:P.SquadType)&&o(a,"data-squad",s)},d(v){v&&(O(t),O(i),O(u),O(d),O(a)),ne(f,v)}}}function Ae(e){let t,l,n,i,u,c,_,d;return{c(){t=p("div"),l=p("div"),u=j(),c=p("div"),o(l,"class",n="icon icon-"+e[30].BulletType+" svelte-4jv4th"),z(l,"background-image","url('"+Z+"/ui/Type_Attack_s.png')"),o(l,"title",i=e[30].BulletType),o(c,"class",_="icon icon-"+e[30].ArmorType+" svelte-4jv4th"),z(c,"background-image","url('"+Z+"/ui/Type_Defense_s.png')"),o(c,"title",d=e[30].ArmorType),o(t,"class","icons svelte-4jv4th")},m(a,h){M(a,t,h),r(t,l),r(t,u),r(t,c)},p(a,h){h[0]&4&&n!==(n="icon icon-"+a[30].BulletType+" svelte-4jv4th")&&o(l,"class",n),h[0]&4&&i!==(i=a[30].BulletType)&&o(l,"title",i),h[0]&4&&_!==(_="icon icon-"+a[30].ArmorType+" svelte-4jv4th")&&o(c,"class",_),h[0]&4&&d!==(d=a[30].ArmorType)&&o(c,"title",d)},d(a){a&&O(t)}}}function Ne(e){let t,l,n,i,u,c,_=e[30].Name_tw+"",d,a,h,s,m=e[30].PathName+"",f,k,v,T,$,S,P=e[30].Name_jp+"",w,C;return{c(){t=p("div"),l=p("div"),n=p("div"),c=j(),d=I(_),a=j(),h=p("div"),s=p("a"),f=I(m),v=j(),T=p("br"),$=j(),S=p("a"),w=I(P),o(n,"class",i="icon icon-"+e[30].TacticRole+" icon-role svelte-4jv4th"),z(n,"background-image","url('"+Z+"/ui/Role_"+e[30].TacticRole+".png')"),o(n,"title",u=e[30].TacticRole),o(l,"class","name-inner svelte-4jv4th"),o(s,"href",k="https://schale.gg/?chara="+e[30].PathName),o(s,"target","schale.gg"),o(s,"class","svelte-4jv4th"),o(S,"href",C="https://bluearchive.wikiru.jp/?"+e[30].Name_jp+"#Profile"),o(S,"target","wikiru"),o(S,"class","svelte-4jv4th"),o(h,"class","tip svelte-4jv4th"),o(t,"class","name svelte-4jv4th")},m(N,E){M(N,t,E),r(t,l),r(l,n),r(l,c),r(l,d),r(t,a),r(t,h),r(h,s),r(s,f),r(h,v),r(h,T),r(h,$),r(h,S),r(S,w)},p(N,E){E[0]&4&&i!==(i="icon icon-"+N[30].TacticRole+" icon-role svelte-4jv4th")&&o(n,"class",i),E[0]&4&&z(n,"background-image","url('"+Z+"/ui/Role_"+N[30].TacticRole+".png')"),E[0]&4&&u!==(u=N[30].TacticRole)&&o(n,"title",u),E[0]&4&&_!==(_=N[30].Name_tw+"")&&V(d,_),E[0]&4&&m!==(m=N[30].PathName+"")&&V(f,m),E[0]&4&&k!==(k="https://schale.gg/?chara="+N[30].PathName)&&o(s,"href",k),E[0]&4&&P!==(P=N[30].Name_jp+"")&&V(w,P),E[0]&4&&C!==(C="https://bluearchive.wikiru.jp/?"+N[30].Name_jp+"#Profile")&&o(S,"href",C)},d(N){N&&O(t)}}}function Be(e){let t,l,n,i,u,c,_,d,a,h,s=e[5]&&Ae(e),m=e[4]>60&&Ne(e);return{c(){t=p("div"),l=p("img"),i=j(),s&&s.c(),u=j(),m&&m.c(),o(l,"class","avatar svelte-4jv4th"),ge(l.src,n=Z+"student/collection/"+e[30].CollectionTexture+".webp")||o(l,"src",n),o(l,"loading","lazy"),o(t,"class","student svelte-4jv4th"),o(t,"data-name",c=e[30].Name_tw),o(t,"data-position",_=e[30].Position),o(t,"data-armortype",d=e[30].ArmorType),o(t,"data-bullettype",a=e[30].BulletType),o(t,"data-tacticrole",h=e[30].TacticRole)},m(f,k){M(f,t,k),r(t,l),r(t,i),s&&s.m(t,null),r(t,u),m&&m.m(t,null)},p(f,k){k[0]&4&&!ge(l.src,n=Z+"student/collection/"+f[30].CollectionTexture+".webp")&&o(l,"src",n),f[5]?s?s.p(f,k):(s=Ae(f),s.c(),s.m(t,u)):s&&(s.d(1),s=null),f[4]>60?m?m.p(f,k):(m=Ne(f),m.c(),m.m(t,null)):m&&(m.d(1),m=null),k[0]&4&&c!==(c=f[30].Name_tw)&&o(t,"data-name",c),k[0]&4&&_!==(_=f[30].Position)&&o(t,"data-position",_),k[0]&4&&d!==(d=f[30].ArmorType)&&o(t,"data-armortype",d),k[0]&4&&a!==(a=f[30].BulletType)&&o(t,"data-bullettype",a),k[0]&4&&h!==(h=f[30].TacticRole)&&o(t,"data-tacticrole",h)},d(f){f&&O(t),s&&s.d(),m&&m.d()}}}function Ee(e){let t,l=e[27].length&&$e(e);return{c(){l&&l.c(),t=Oe()},m(n,i){l&&l.m(n,i),M(n,t,i)},p(n,i){n[27].length?l?l.p(n,i):(l=$e(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(n){n&&O(t),l&&l.d(n)}}}function qe(e){let t,l=F(e[24]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Ee(ke(e,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=Oe()},m(i,u){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(i,u);M(i,t,u)},p(i,u){if(u[0]&244){l=F(i[24]);let c;for(c=0;c<l.length;c+=1){const _=ke(i,l,c);n[c]?n[c].p(_,u):(n[c]=Ee(_),n[c].c(),n[c].m(t.parentNode,t))}for(;c<n.length;c+=1)n[c].d(1);n.length=l.length}},d(i){i&&O(t),ne(n,i)}}}function lt(e){let t,l,n,i,u,c,_,d,a,h,s,m,f,k,v,T,$,S,P,w,C,N,E,H,G,U,y,B,A,x,q,pe,ae,re,me,K=F(e[1]),R=[];for(let g=0;g<K.length;g+=1)R[g]=Pe(je(e,K,g));let J=F(e[2]),L=[];for(let g=0;g<J.length;g+=1)L[g]=qe(ye(e,J,g));return{c(){t=p("main"),l=p("div"),n=j(),i=p("details"),u=p("summary"),u.textContent="Filters",c=j(),_=p("form");for(let g=0;g<R.length;g+=1)R[g].c();d=j(),a=p("div"),h=p("fieldset"),s=p("legend"),s.textContent="Name",m=j(),f=p("input"),k=j(),v=p("fieldset"),T=p("legend"),T.textContent="圖片尺寸",$=j(),S=p("div"),P=p("input"),w=j(),C=I(e[4]),N=I("px"),E=j(),H=p("div"),G=p("label"),U=p("input"),y=I(" 顯示圖示"),B=j(),A=p("input"),x=j(),q=p("div");for(let g=0;g<L.length;g+=1)L[g].c();pe=j(),ae=p("footer"),ae.innerHTML='<hr/> <h1>Blue Archive students filter</h1> <hr/> <details open=""><summary>url para:</summary> <ul class="svelte-4jv4th"><li>`name=xxx`: name filter</li> <li>`size=96`: image size</li> <li>`icon=1`: show type icon</li></ul></details> <hr/>\n\n    data &amp; image come from <a href="https://github.com/lonqie/SchaleDB">https://github.com/lonqie/SchaleDB</a>',o(l,"class","dynamic-style"),o(u,"class","svelte-4jv4th"),o(f,"type","search"),o(f,"placeholder","name"),f.autofocus=!0,o(f,"accesskey","q"),o(h,"class","svelte-4jv4th"),o(P,"type","range"),o(P,"step","12"),o(P,"min","48"),o(P,"max","96"),z(S,"display","inline-flex"),o(v,"class","svelte-4jv4th"),o(U,"type","checkbox"),o(A,"type","reset"),A.value="Reset",z(H,"display","flex"),z(H,"justify-content","space-between"),o(_,"class","filter-form svelte-4jv4th"),o(i,"class","filters svelte-4jv4th"),i.open=!0,o(q,"class","table svelte-4jv4th"),z(q,"--avatar-size",e[4]),o(q,"data-name",e[0]),o(ae,"class","svelte-4jv4th")},m(g,D){M(g,t,D),r(t,l),e[9](l),r(t,n),r(t,i),r(i,u),r(i,c),r(i,_);for(let b=0;b<R.length;b+=1)R[b]&&R[b].m(_,null);r(_,d),r(_,a),r(a,h),r(h,s),r(h,m),r(h,f),oe(f,e[0]),r(a,k),r(a,v),r(v,T),r(v,$),r(v,S),r(S,P),oe(P,e[4]),r(S,w),r(S,C),r(S,N),r(a,E),r(a,H),r(H,G),r(G,U),U.checked=e[5],r(G,y),r(H,B),r(H,A),r(t,x),r(t,q);for(let b=0;b<L.length;b+=1)L[b]&&L[b].m(q,null);r(t,pe),r(t,ae),f.focus(),re||(me=[W(f,"input",e[11]),W(P,"change",e[12]),W(P,"input",e[12]),W(U,"change",e[13]),W(_,"reset",e[8])],re=!0)},p(g,D){if(D[0]&130){K=F(g[1]);let b;for(b=0;b<K.length;b+=1){const ee=je(g,K,b);R[b]?R[b].p(ee,D):(R[b]=Pe(ee),R[b].c(),R[b].m(_,d))}for(;b<R.length;b+=1)R[b].d(1);R.length=K.length}if(D[0]&1&&f.value!==g[0]&&oe(f,g[0]),D[0]&16&&oe(P,g[4]),D[0]&16&&V(C,g[4]),D[0]&32&&(U.checked=g[5]),D[0]&244){J=F(g[2]);let b;for(b=0;b<J.length;b+=1){const ee=ye(g,J,b);L[b]?L[b].p(ee,D):(L[b]=qe(ee),L[b].c(),L[b].m(q,null))}for(;b<L.length;b+=1)L[b].d(1);L.length=J.length}D[0]&16&&z(q,"--avatar-size",g[4]),D[0]&1&&o(q,"data-name",g[0])},i:le,o:le,d(g){g&&O(t),e[9](null),ne(R,g),ne(L,g),re=!1,ie(me)}}}const Z="https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/";function nt(e,t,l){let n=["TacticRole","Position","BulletType","ArmorType"],i=["Explosion","Pierce","Mystic","Sonic"],u=[],c,_=new URLSearchParams(location.search),d=_.get("name"),a=[],h={name:"",checkbox:""},s=+_.get("size")||96,m=!!+_.get("icon");T();function f(){if(!c)return;let y=h.name+h.checkbox;l(3,c.innerHTML=y?`<style>${y}</style>`:"",c)}function k(){let y=d==null?void 0:d.trim();h.name=y?`.student.student.student.student:not([data-name*="${y}"]) { display: none; }`:"",f()}function v(){let y=a.map(A=>A.filters.filter(q=>q.value).length?A.filters.filter(q=>!q.value).map(q=>`[data-${A.prop.toLowerCase()}="${q.label}"]`):void 0).flat().filter(Boolean),B=y.length?y.map(A=>`.student${A}`).join()+"{ display: none !important; }":"";h.checkbox=B,f()}async function T(){let y=await fetch(tt).then(B=>B.json());S(y),$(y)}function $(y){l(1,a=n.map(B=>({prop:B,filters:[...new Set(y.map(A=>A[B]))].map(A=>({label:A,value:!1}))})))}function S(y){l(2,u=[]),y.forEach(B=>{let A=i.findIndex(x=>x===B.BulletType);u[A]||l(2,u[A]=[[],[]],u),u[A][B.SquadType==="Main"?0:1].push(B)})}function P(y=""){return w[y]||y}let w={Explosion:"爆發",Pierce:"貫穿",Mystic:"神秘",Sonic:"振動",Main:"前排",Support:"後排",TacticRole:"作用",Position:"位置",BulletType:"攻屬",ArmorType:"防屬",DamageDealer:"輸出",Tanker:"坦克",Supporter:"輔助",Healer:"治療",Vehicle:"T.S.",Back:"遠距",Front:"近距",Middle:"中距",LightArmor:"輕甲",HeavyArmor:"重甲",Unarmed:"特殊",ElasticArmor:"彈力"};function C(){l(0,d=""),a.forEach(y=>{y.filters.forEach(B=>{B.value=!1})}),l(1,a)}function N(y){fe[y?"unshift":"push"](()=>{c=y,l(3,c)})}function E(y,B){y[B].value=this.checked,l(1,a)}function H(){d=this.value,l(0,d)}function G(){s=Fe(this.value),l(4,s)}function U(){m=this.checked,l(5,m)}return e.$$.update=()=>{e.$$.dirty[0]&1&&k(),e.$$.dirty[0]&2&&v()},[d,a,u,c,s,m,i,P,C,N,E,H,G,U]}class it extends xe{constructor(t){super(),Ze(this,t,nt,lt,ze,{},null,[-1,-1])}}new it({target:document.getElementById("app")});

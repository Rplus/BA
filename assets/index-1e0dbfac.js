var Me=Object.defineProperty;var De=(e,t,l)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var fe=(e,t,l)=>(De(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=l(i);fetch(i.href,c)}})();function ee(){}function je(e){return e()}function ge(){return Object.create(null)}function le(e){e.forEach(je)}function Le(e){return typeof e=="function"}function ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ae;function ve(e,t){return e===t?!0:(ae||(ae=document.createElement("a")),ae.href=t,e===ae.href)}function Ie(e){return Object.keys(e).length===0}function f(e,t){e.appendChild(t)}function C(e,t,l){e.insertBefore(t,l||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function te(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function g(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function S(){return O(" ")}function Oe(){return O("")}function J(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function u(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Fe(e){return e===""?null:+e}function He(e){return Array.from(e.childNodes)}function H(e,t){t=""+t,e.data!==t&&(e.data=t)}function oe(e,t){e.value=t??""}function D(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}let pe;function x(e){pe=e}const Q=[],ce=[];let X=[];const be=[],Ue=Promise.resolve();let de=!1;function Ve(){de||(de=!0,Ue.then(Ce))}function he(e){X.push(e)}const ue=new Set;let K=0;function Ce(){if(K!==0)return;const e=pe;do{try{for(;K<Q.length;){const t=Q[K];K++,x(t),Ge(t.$$)}}catch(t){throw Q.length=0,K=0,t}for(x(null),Q.length=0,K=0;ce.length;)ce.pop()();for(let t=0;t<X.length;t+=1){const l=X[t];ue.has(l)||(ue.add(l),l())}X.length=0}while(Q.length);for(;be.length;)be.pop()();de=!1,ue.clear(),x(e)}function Ge(e){if(e.fragment!==null){e.update(),le(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(he)}}function Ke(e){const t=[],l=[];X.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),X=t}const Je=new Set;function Qe(e,t){e&&e.i&&(Je.delete(e),e.i(t))}function z(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function We(e,t,l){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,l),he(()=>{const c=e.$$.on_mount.map(je).filter(Le);e.$$.on_destroy?e.$$.on_destroy.push(...c):le(c),e.$$.on_mount=[]}),i.forEach(he)}function Xe(e,t){const l=e.$$;l.fragment!==null&&(Ke(l.after_update),le(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Ye(e,t){e.$$.dirty[0]===-1&&(Q.push(e),Ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ze(e,t,l,n,i,c,o,h=[-1]){const d=pe;x(e);const s=e.$$={fragment:null,ctx:[],props:c,update:ee,not_equal:i,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:ge(),dirty:h,skip_bound:!1,root:t.target||d.$$.root};o&&o(s.root);let p=!1;if(s.ctx=l?l(e,t.props||{},(a,_,...r)=>{const y=r.length?r[0]:_;return s.ctx&&i(s.ctx[a],s.ctx[a]=y)&&(!s.skip_bound&&s.bound[a]&&s.bound[a](y),p&&Ye(e,a)),_}):[],s.update(),p=!0,le(s.before_update),s.fragment=n?n(s.ctx):!1,t.target){if(t.hydrate){const a=He(t.target);s.fragment&&s.fragment.l(a),a.forEach(L)}else s.fragment&&s.fragment.c();t.intro&&Qe(e.$$.fragment),We(e,t.target,t.anchor),Ce()}x(d)}class xe{constructor(){fe(this,"$$");fe(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=ee}$on(t,l){if(!Le(l))return ee;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(et);const tt="/BA/assets/students-fcfbe29c.json";function ye(e,t,l){const n=e.slice();return n[24]=t[l],n[26]=l,n}function ke(e,t,l){const n=e.slice();return n[27]=t[l],n}function Te(e,t,l){const n=e.slice();return n[30]=t[l],n[32]=l,n}function we(e,t,l){const n=e.slice();return n[33]=t[l],n}function Se(e,t,l){const n=e.slice();return n[36]=t[l],n[37]=t,n[38]=l,n}function $e(e){let t,l,n,i,c=e[7](e[36].label)+"",o,h,d;function s(){e[10].call(n,e[37],e[38])}return{c(){t=g("div"),l=g("label"),n=g("input"),i=S(),o=O(c),u(n,"type","checkbox")},m(p,a){C(p,t,a),f(t,l),f(l,n),n.checked=e[36].value,f(l,i),f(l,o),h||(d=J(n,"change",s),h=!0)},p(p,a){e=p,a[0]&2&&(n.checked=e[36].value),a[0]&2&&c!==(c=e[7](e[36].label)+"")&&H(o,c)},d(p){p&&L(t),h=!1,d()}}}function Ae(e){let t,l,n=e[7](e[33].prop)+"",i,c,o,h=z(e[33].filters),d=[];for(let s=0;s<h.length;s+=1)d[s]=$e(Se(e,h,s));return{c(){t=g("fieldset"),l=g("legend"),i=O(n),c=S(),o=g("div");for(let s=0;s<d.length;s+=1)d[s].c();u(t,"class","svelte-1g5sfme")},m(s,p){C(s,t,p),f(t,l),f(l,i),f(t,c),f(t,o);for(let a=0;a<d.length;a+=1)d[a]&&d[a].m(o,null)},p(s,p){if(p[0]&2&&n!==(n=s[7](s[33].prop)+"")&&H(i,n),p[0]&130){h=z(s[33].filters);let a;for(a=0;a<h.length;a+=1){const _=Se(s,h,a);d[a]?d[a].p(_,p):(d[a]=$e(_),d[a].c(),d[a].m(o,null))}for(;a<d.length;a+=1)d[a].d(1);d.length=h.length}},d(s){s&&L(t),te(d,s)}}}function Ne(e){var y;let t,l=e[7]((y=e[27][0])==null?void 0:y.SquadType)+"",n,i,c,o=e[7](e[6][e[26]])+"",h,d,s,p,a,_=z(e[27]),r=[];for(let m=0;m<_.length;m+=1)r[m]=Ee(Te(e,_,m));return{c(){var m,w;t=g("h3"),n=O(l),i=S(),c=g("h3"),h=O(o),d=S(),s=g("div");for(let $=0;$<r.length;$+=1)r[$].c();p=S(),u(t,"class","th svelte-1g5sfme"),D(t,"grid-area",((m=e[27][0])==null?void 0:m.SquadType)+"-title"),u(c,"class","th svelte-1g5sfme"),D(c,"grid-area",e[6][e[26]]+"-title"),u(s,"class","cell svelte-1g5sfme"),u(s,"data-squad",a=(w=e[27][0])==null?void 0:w.SquadType),u(s,"data-bullet",e[6][e[26]])},m(m,w){C(m,t,w),f(t,n),C(m,i,w),C(m,c,w),f(c,h),C(m,d,w),C(m,s,w);for(let $=0;$<r.length;$+=1)r[$]&&r[$].m(s,null);f(s,p)},p(m,w){var $,E,A;if(w[0]&4&&l!==(l=m[7](($=m[27][0])==null?void 0:$.SquadType)+"")&&H(n,l),w[0]&4&&D(t,"grid-area",((E=m[27][0])==null?void 0:E.SquadType)+"-title"),w[0]&52){_=z(m[27]);let T;for(T=0;T<_.length;T+=1){const P=Te(m,_,T);r[T]?r[T].p(P,w):(r[T]=Ee(P),r[T].c(),r[T].m(s,p))}for(;T<r.length;T+=1)r[T].d(1);r.length=_.length}w[0]&4&&a!==(a=(A=m[27][0])==null?void 0:A.SquadType)&&u(s,"data-squad",a)},d(m){m&&(L(t),L(i),L(c),L(d),L(s)),te(r,m)}}}function Be(e){let t,l,n,i,c,o,h,d,s,p,a,_;return{c(){t=g("div"),l=g("div"),c=S(),o=g("div"),s=S(),p=g("div"),u(l,"class",n="icon icon-"+e[30].TacticRole+" icon-role svelte-1g5sfme"),D(l,"background-image","url('"+W+"/ui/Role_"+e[30].TacticRole+".png')"),u(l,"title",i=e[30].TacticRole),u(o,"class",h="icon icon-"+e[30].BulletType+" svelte-1g5sfme"),D(o,"background-image","url('"+W+"/ui/Type_Attack_s.png')"),u(o,"title",d=e[30].BulletType),u(p,"class",a="icon icon-"+e[30].ArmorType+" svelte-1g5sfme"),D(p,"background-image","url('"+W+"/ui/Type_Defense_s.png')"),u(p,"title",_=e[30].ArmorType),u(t,"class","icons svelte-1g5sfme")},m(r,y){C(r,t,y),f(t,l),f(t,c),f(t,o),f(t,s),f(t,p)},p(r,y){y[0]&4&&n!==(n="icon icon-"+r[30].TacticRole+" icon-role svelte-1g5sfme")&&u(l,"class",n),y[0]&4&&D(l,"background-image","url('"+W+"/ui/Role_"+r[30].TacticRole+".png')"),y[0]&4&&i!==(i=r[30].TacticRole)&&u(l,"title",i),y[0]&4&&h!==(h="icon icon-"+r[30].BulletType+" svelte-1g5sfme")&&u(o,"class",h),y[0]&4&&d!==(d=r[30].BulletType)&&u(o,"title",d),y[0]&4&&a!==(a="icon icon-"+r[30].ArmorType+" svelte-1g5sfme")&&u(p,"class",a),y[0]&4&&_!==(_=r[30].ArmorType)&&u(p,"title",_)},d(r){r&&L(t)}}}function Pe(e){let t,l,n=e[30].Name+"",i,c,o,h,d=e[30].PathName+"",s,p,a,_,r,y,m,w=e[30].Name_jp+"",$,E,A;return{c(){t=g("div"),l=g("span"),i=O(n),c=S(),o=g("div"),h=g("a"),s=O(d),p=O(" 🔗"),_=S(),r=g("br"),y=S(),m=g("a"),$=O(w),E=O(" 🔗"),u(h,"href",a="https://schale.gg/?chara="+e[30].PathName),u(h,"target","schale.gg"),u(h,"class","svelte-1g5sfme"),u(m,"href",A="https://bluearchive.wikiru.jp/?"+e[30].Name_jp),u(m,"target","wikiru"),u(m,"class","svelte-1g5sfme"),u(o,"class","tip svelte-1g5sfme"),u(t,"class","name svelte-1g5sfme")},m(T,P){C(T,t,P),f(t,l),f(l,i),f(t,c),f(t,o),f(o,h),f(h,s),f(h,p),f(o,_),f(o,r),f(o,y),f(o,m),f(m,$),f(m,E)},p(T,P){P[0]&4&&n!==(n=T[30].Name+"")&&H(i,n),P[0]&4&&d!==(d=T[30].PathName+"")&&H(s,d),P[0]&4&&a!==(a="https://schale.gg/?chara="+T[30].PathName)&&u(h,"href",a),P[0]&4&&w!==(w=T[30].Name_jp+"")&&H($,w),P[0]&4&&A!==(A="https://bluearchive.wikiru.jp/?"+T[30].Name_jp)&&u(m,"href",A)},d(T){T&&L(t)}}}function Ee(e){let t,l,n,i,c,o,h,d,s,p,a=e[5]&&Be(e),_=e[4]>60&&Pe(e);return{c(){t=g("div"),l=g("img"),i=S(),a&&a.c(),c=S(),_&&_.c(),u(l,"class","avatar svelte-1g5sfme"),ve(l.src,n=W+"student/collection/"+e[30].CollectionTexture+".webp")||u(l,"src",n),u(l,"loading","lazy"),u(t,"class","student svelte-1g5sfme"),u(t,"data-name",o=e[30].Name),u(t,"data-position",h=e[30].Position),u(t,"data-armortype",d=e[30].ArmorType),u(t,"data-bullettype",s=e[30].BulletType),u(t,"data-tacticrole",p=e[30].TacticRole)},m(r,y){C(r,t,y),f(t,l),f(t,i),a&&a.m(t,null),f(t,c),_&&_.m(t,null)},p(r,y){y[0]&4&&!ve(l.src,n=W+"student/collection/"+r[30].CollectionTexture+".webp")&&u(l,"src",n),r[5]?a?a.p(r,y):(a=Be(r),a.c(),a.m(t,c)):a&&(a.d(1),a=null),r[4]>60?_?_.p(r,y):(_=Pe(r),_.c(),_.m(t,null)):_&&(_.d(1),_=null),y[0]&4&&o!==(o=r[30].Name)&&u(t,"data-name",o),y[0]&4&&h!==(h=r[30].Position)&&u(t,"data-position",h),y[0]&4&&d!==(d=r[30].ArmorType)&&u(t,"data-armortype",d),y[0]&4&&s!==(s=r[30].BulletType)&&u(t,"data-bullettype",s),y[0]&4&&p!==(p=r[30].TacticRole)&&u(t,"data-tacticrole",p)},d(r){r&&L(t),a&&a.d(),_&&_.d()}}}function qe(e){let t,l=e[27].length&&Ne(e);return{c(){l&&l.c(),t=Oe()},m(n,i){l&&l.m(n,i),C(n,t,i)},p(n,i){n[27].length?l?l.p(n,i):(l=Ne(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(n){n&&L(t),l&&l.d(n)}}}function Re(e){let t,l=z(e[24]),n=[];for(let i=0;i<l.length;i+=1)n[i]=qe(ke(e,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=Oe()},m(i,c){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,c);C(i,t,c)},p(i,c){if(c[0]&244){l=z(i[24]);let o;for(o=0;o<l.length;o+=1){const h=ke(i,l,o);n[o]?n[o].p(h,c):(n[o]=qe(h),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&L(t),te(n,i)}}}function lt(e){let t,l,n,i,c,o,h,d,s,p,a,_,r,y,m,w,$,E,A,T,P,ne,ie,I,U,F,k,B,N,Y,q,_e,se,re,me,V=z(e[1]),R=[];for(let v=0;v<V.length;v+=1)R[v]=Ae(we(e,V,v));let G=z(e[2]),j=[];for(let v=0;v<G.length;v+=1)j[v]=Re(ye(e,G,v));return{c(){t=g("main"),l=g("div"),n=S(),i=g("details"),c=g("summary"),c.textContent="Filters",o=S(),h=g("form");for(let v=0;v<R.length;v+=1)R[v].c();d=S(),s=g("div"),p=g("fieldset"),a=g("legend"),a.textContent="Name",_=S(),r=g("input"),y=S(),m=g("fieldset"),w=g("legend"),w.textContent="圖片尺寸",$=S(),E=g("div"),A=g("input"),T=S(),P=O(e[4]),ne=O("px"),ie=S(),I=g("div"),U=g("label"),F=g("input"),k=O(" 顯示圖示"),B=S(),N=g("input"),Y=S(),q=g("div");for(let v=0;v<j.length;v+=1)j[v].c();_e=S(),se=g("footer"),se.innerHTML='<hr/> <h1>Blue Archive students filter</h1> <hr/> <details open=""><summary>url para:</summary> <ul class="svelte-1g5sfme"><li>`name=xxx`: name filter</li> <li>`size=96`: image size</li> <li>`icon=1`: show type icon</li></ul></details> <hr/>\n\n    data &amp; image come from <a href="https://github.com/lonqie/SchaleDB">https://github.com/lonqie/SchaleDB</a>',u(l,"class","dynamic-style"),u(c,"class","svelte-1g5sfme"),u(r,"type","search"),u(r,"placeholder","name"),r.autofocus=!0,u(p,"class","svelte-1g5sfme"),u(A,"type","range"),u(A,"step","12"),u(A,"min","48"),u(A,"max","96"),D(E,"display","inline-flex"),u(m,"class","svelte-1g5sfme"),u(F,"type","checkbox"),u(N,"type","reset"),N.value="Reset",D(I,"display","flex"),D(I,"justify-content","space-between"),u(h,"class","filter-form svelte-1g5sfme"),u(i,"class","filters svelte-1g5sfme"),i.open=!0,u(q,"class","table svelte-1g5sfme"),D(q,"--avatar-size",e[4]),u(q,"data-name",e[0]),u(se,"class","svelte-1g5sfme")},m(v,M){C(v,t,M),f(t,l),e[9](l),f(t,n),f(t,i),f(i,c),f(i,o),f(i,h);for(let b=0;b<R.length;b+=1)R[b]&&R[b].m(h,null);f(h,d),f(h,s),f(s,p),f(p,a),f(p,_),f(p,r),oe(r,e[0]),f(s,y),f(s,m),f(m,w),f(m,$),f(m,E),f(E,A),oe(A,e[4]),f(E,T),f(E,P),f(E,ne),f(s,ie),f(s,I),f(I,U),f(U,F),F.checked=e[5],f(U,k),f(I,B),f(I,N),f(t,Y),f(t,q);for(let b=0;b<j.length;b+=1)j[b]&&j[b].m(q,null);f(t,_e),f(t,se),r.focus(),re||(me=[J(r,"input",e[11]),J(A,"change",e[12]),J(A,"input",e[12]),J(F,"change",e[13]),J(h,"reset",e[8])],re=!0)},p(v,M){if(M[0]&130){V=z(v[1]);let b;for(b=0;b<V.length;b+=1){const Z=we(v,V,b);R[b]?R[b].p(Z,M):(R[b]=Ae(Z),R[b].c(),R[b].m(h,d))}for(;b<R.length;b+=1)R[b].d(1);R.length=V.length}if(M[0]&1&&r.value!==v[0]&&oe(r,v[0]),M[0]&16&&oe(A,v[4]),M[0]&16&&H(P,v[4]),M[0]&32&&(F.checked=v[5]),M[0]&244){G=z(v[2]);let b;for(b=0;b<G.length;b+=1){const Z=ye(v,G,b);j[b]?j[b].p(Z,M):(j[b]=Re(Z),j[b].c(),j[b].m(q,null))}for(;b<j.length;b+=1)j[b].d(1);j.length=G.length}M[0]&16&&D(q,"--avatar-size",v[4]),M[0]&1&&u(q,"data-name",v[0])},i:ee,o:ee,d(v){v&&L(t),e[9](null),te(R,v),te(j,v),re=!1,le(me)}}}const W="https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/";function nt(e,t,l){let n=["TacticRole","Position","BulletType","ArmorType"],i=["Explosion","Pierce","Mystic","Sonic"],c=[],o,h=new URLSearchParams(location.search),d=h.get("name"),s=[],p={name:"",checkbox:""},a=+h.get("size")||96,_=!!+h.get("icon");w();function r(){if(!o)return;let k=p.name+p.checkbox;l(3,o.innerHTML=k?`<style>${k}</style>`:"",o)}function y(){let k=d==null?void 0:d.trim();p.name=k?`.student.student.student.student:not([data-name*="${k}"]) { display: none; }`:"",r()}function m(){let k=s.map(N=>N.filters.filter(q=>q.value).length?N.filters.filter(q=>!q.value).map(q=>`[data-${N.prop.toLowerCase()}="${q.label}"]`):void 0).flat().filter(Boolean),B=k.length?k.map(N=>`.student${N}`).join()+"{ display: none !important; }":"";p.checkbox=B,r()}async function w(){let k=await fetch(tt).then(B=>B.json());E(k),$(k)}function $(k){l(1,s=n.map(B=>({prop:B,filters:[...new Set(k.map(N=>N[B]))].map(N=>({label:N,value:!1}))})))}function E(k){l(2,c=[]),k.forEach(B=>{let N=i.findIndex(Y=>Y===B.BulletType);c[N]||l(2,c[N]=[[],[]],c),c[N][B.SquadType==="Main"?0:1].push(B)})}function A(k=""){return T[k]||k}let T={Explosion:"爆發",Pierce:"貫穿",Mystic:"神秘",Sonic:"振動",Main:"前排",Support:"後排",TacticRole:"作用",Position:"位置",BulletType:"攻屬",ArmorType:"防屬",DamageDealer:"輸出",Tanker:"坦克",Supporter:"輔助",Healer:"治療",Vehicle:"T.S.",Back:"遠距",Front:"近距",Middle:"中距",LightArmor:"輕甲",HeavyArmor:"重甲",Unarmed:"特殊",ElasticArmor:"彈力"};function P(){l(0,d=""),s.forEach(k=>{k.filters.forEach(B=>{B.value=!1})}),l(1,s)}function ne(k){ce[k?"unshift":"push"](()=>{o=k,l(3,o)})}function ie(k,B){k[B].value=this.checked,l(1,s)}function I(){d=this.value,l(0,d)}function U(){a=Fe(this.value),l(4,a)}function F(){_=this.checked,l(5,_)}return e.$$.update=()=>{e.$$.dirty[0]&1&&y(),e.$$.dirty[0]&2&&m()},[d,s,c,o,a,_,i,A,P,ne,ie,I,U,F]}class it extends xe{constructor(t){super(),Ze(this,t,nt,lt,ze,{},null,[-1,-1])}}new it({target:document.getElementById("app")});

var Ke=Object.defineProperty;var We=(t,e,l)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var re=(t,e,l)=>(We(t,typeof e!="symbol"?e+"":e,l),l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function l(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=l(i);fetch(i.href,r)}})();function j(){}function Oe(t){return t()}function de(){return Object.create(null)}function z(t){t.forEach(Oe)}function De(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ie;function _e(t,e){return t===e?!0:(ie||(ie=document.createElement("a")),ie.href=e,t===ie.href)}function Je(t){return Object.keys(t).length===0}function k(t,e){t.appendChild(e)}function E(t,e,l){t.insertBefore(e,l||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function $(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function q(){return I(" ")}function Qe(){return I("")}function O(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Xe(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Ye(t){return Array.from(t.childNodes)}function V(t,e){e=""+e,t.data!==e&&(t.data=e)}function he(t,e){t.value=e??""}function D(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function se(t,e,l){t.classList.toggle(e,!!l)}function Ze(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Y;function X(t){Y=t}function Ie(){if(!Y)throw new Error("Function called outside component initialization");return Y}function je(t){Ie().$$.on_mount.push(t)}function ze(){const t=Ie();return(e,l,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=Ze(e,l,{cancelable:n});return i.slice().forEach(a=>{a.call(t,r)}),!r.defaultPrevented}return!0}}function xe(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const U=[],ae=[];let G=[];const pe=[],et=Promise.resolve();let ce=!1;function tt(){ce||(ce=!0,et.then(Fe))}function fe(t){G.push(t)}const ue=new Set;let H=0;function Fe(){if(H!==0)return;const t=Y;do{try{for(;H<U.length;){const e=U[H];H++,X(e),lt(e.$$)}}catch(e){throw U.length=0,H=0,e}for(X(null),U.length=0,H=0;ae.length;)ae.pop()();for(let e=0;e<G.length;e+=1){const l=G[e];ue.has(l)||(ue.add(l),l())}G.length=0}while(U.length);for(;pe.length;)pe.pop()();ce=!1,ue.clear(),X(t)}function lt(t){if(t.fragment!==null){t.update(),z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(fe)}}function nt(t){const e=[],l=[];G.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),G=e}const oe=new Set;let F;function K(){F={r:0,c:[],p:F}}function W(){F.r||z(F.c),F=F.p}function P(t,e){t&&t.i&&(oe.delete(t),t.i(e))}function N(t,e,l,n){if(t&&t.o){if(oe.has(t))return;oe.add(t),F.c.push(()=>{oe.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function R(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t,e){N(t,1,1,()=>{e.delete(t.key)})}function Ue(t,e,l,n,i,r,a,h,s,o,u,d){let _=t.length,c=r.length,f=_;const g={};for(;f--;)g[t[f].key]=f;const p=[],v=new Map,B=new Map,T=[];for(f=c;f--;){const S=d(i,r,f),M=l(S);let L=a.get(M);L?n&&T.push(()=>L.p(S,e)):(L=o(M,S),L.c()),v.set(M,p[f]=L),M in g&&B.set(M,Math.abs(f-g[M]))}const w=new Set,y=new Set;function b(S){P(S,1),S.m(h,u),a.set(S.key,S),u=S.first,c--}for(;_&&c;){const S=p[c-1],M=t[_-1],L=S.key,ne=M.key;S===M?(u=S.first,_--,c--):v.has(ne)?!a.has(L)||w.has(L)?b(S):y.has(ne)?_--:B.get(L)>B.get(ne)?(y.add(L),b(S)):(w.add(ne),_--):(s(M,a),_--)}for(;_--;){const S=t[_];v.has(S.key)||s(S,a)}for(;c;)b(p[c-1]);return z(T),p}function ee(t){t&&t.c()}function J(t,e,l){const{fragment:n,after_update:i}=t.$$;n&&n.m(e,l),fe(()=>{const r=t.$$.on_mount.map(Oe).filter(De);t.$$.on_destroy?t.$$.on_destroy.push(...r):z(r),t.$$.on_mount=[]}),i.forEach(fe)}function Q(t,e){const l=t.$$;l.fragment!==null&&(nt(l.after_update),z(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function it(t,e){t.$$.dirty[0]===-1&&(U.push(t),tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function te(t,e,l,n,i,r,a,h=[-1]){const s=Y;X(t);const o=t.$$={fragment:null,ctx:[],props:r,update:j,not_equal:i,bound:de(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:de(),dirty:h,skip_bound:!1,root:e.target||s.$$.root};a&&a(o.root);let u=!1;if(o.ctx=l?l(t,e.props||{},(d,_,...c)=>{const f=c.length?c[0]:_;return o.ctx&&i(o.ctx[d],o.ctx[d]=f)&&(!o.skip_bound&&o.bound[d]&&o.bound[d](f),u&&it(t,d)),_}):[],o.update(),u=!0,z(o.before_update),o.fragment=n?n(o.ctx):!1,e.target){if(e.hydrate){const d=Ye(e.target);o.fragment&&o.fragment.l(d),d.forEach(A)}else o.fragment&&o.fragment.c();e.intro&&P(t.$$.fragment),J(t,e.target,e.anchor),Fe()}X(s)}class le{constructor(){re(this,"$$");re(this,"$$set")}$destroy(){Q(this,1),this.$destroy=j}$on(e,l){if(!De(l))return j;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Je(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const st="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(st);const ot="/BA/assets/students-37ead7a7.json",rt={Explosion:"爆發",Pierce:"貫穿",Mystic:"神秘",Sonic:"振動",Main:"前排",Support:"後排",School:"學園",TacticRole:"作用",Position:"射程",BulletType:"攻屬",ArmorType:"防屬",SquadType:"分類",DamageDealer:"輸出",Tanker:"坦克",Supporter:"輔助",Healer:"治療",Vehicle:"T.S.",Back:"遠距",Front:"近距",Middle:"中距",LightArmor:"輕甲",HeavyArmor:"重甲",Unarmed:"特殊",ElasticArmor:"彈力",Gehenna:"格黑娜",Millennium:"千年",Trinity:"三一",Abydos:"阿拜多斯",Shanhaijing:"山海經",Hyakkiyako:"百鬼夜行",RedWinter:"赤冬",Valkyrie:"女武神",ETC:"?",SRT:"SRT",Arius:"奧利斯"},Ve="https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images";function me(t){return`${Ve}/student/collection/${t}.webp`}function ge(t){return`${Ve}/ui/Role_${t.TacticRole}.png`}function C(t=""){return rt[t]||t}function ut(t){let e;return{c(){e=$("div"),e.textContent="?",m(e,"class","empty svelte-13u9lv6")},m(l,n){E(l,e,n)},p:j,d(l){l&&A(e)}}}function at(t){let e,l,n,i,r,a,h=C(t[0].BulletType).slice(0,1)+"",s,o,u,d,_,c=C(t[0].ArmorType).slice(0,1)+"",f,g,p,v,B,T=t[0].Name_tw+"",w;return{c(){e=$("img"),i=q(),r=$("div"),a=$("div"),s=I(h),d=q(),_=$("div"),f=I(c),v=q(),B=$("div"),w=I(T),m(e,"class","avatar svelte-13u9lv6"),_e(e.src,l=me(t[0].Id))||m(e,"src",l),m(e,"alt",n=ve(t[0])),m(a,"class","icon color svelte-13u9lv6"),m(a,"data-bullettype",o=t[0].BulletType),m(a,"title",u=t[0].BulletType),m(_,"class","icon color svelte-13u9lv6"),m(_,"data-armortype",g=t[0].ArmorType),m(_,"title",p=t[0].ArmorType),m(r,"class","icons svelte-13u9lv6"),m(B,"class","name svelte-13u9lv6"),D(B,"--icon-role","url("+ge(t[0])+")")},m(y,b){E(y,e,b),E(y,i,b),E(y,r,b),k(r,a),k(a,s),k(r,d),k(r,_),k(_,f),E(y,v,b),E(y,B,b),k(B,w)},p(y,b){b&1&&!_e(e.src,l=me(y[0].Id))&&m(e,"src",l),b&1&&n!==(n=ve(y[0]))&&m(e,"alt",n),b&1&&h!==(h=C(y[0].BulletType).slice(0,1)+"")&&V(s,h),b&1&&o!==(o=y[0].BulletType)&&m(a,"data-bullettype",o),b&1&&u!==(u=y[0].BulletType)&&m(a,"title",u),b&1&&c!==(c=C(y[0].ArmorType).slice(0,1)+"")&&V(f,c),b&1&&g!==(g=y[0].ArmorType)&&m(_,"data-armortype",g),b&1&&p!==(p=y[0].ArmorType)&&m(_,"title",p),b&1&&T!==(T=y[0].Name_tw+"")&&V(w,T),b&1&&D(B,"--icon-role","url("+ge(y[0])+")")},d(y){y&&(A(e),A(i),A(r),A(v),A(B))}}}function ct(t){let e;function l(r,a){return r[0].Id?at:ut}let n=l(t),i=n(t);return{c(){e=$("div"),i.c(),m(e,"class","student svelte-13u9lv6")},m(r,a){E(r,e,a),i.m(e,null)},p(r,[a]){n===(n=l(r))&&i?i.p(r,a):(i.d(1),i=n(r),i&&(i.c(),i.m(e,null)))},i:j,o:j,d(r){r&&A(e),i.d()}}}function ve(t){return`${t.Name_tw}, ${t.Name_jp}, ${t.PathName}`}function ft(t,e,l){let{student:n={}}=e;return t.$$set=i=>{"student"in i&&l(0,n=i.student)},[n]}class Ge extends le{constructor(e){super(),te(this,e,ft,ct,Z,{student:0})}}function ye(t,e,l){const n=t.slice();return n[17]=e[l],n}function be(t,e,l){const n=t.slice();return n[20]=e[l],n[21]=e,n[22]=l,n}function ke(t){let e,l,n,i,r,a,h=C(t[20].label)+"",s,o,u,d;function _(){t[8].call(n,t[21],t[22])}return{c(){e=$("div"),l=$("label"),n=$("input"),i=q(),r=$("i"),a=q(),s=I(h),o=q(),m(n,"type","checkbox"),m(r,"class","label-icon"),D(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+t[20].label+".png')")},m(c,f){E(c,e,f),k(e,l),k(l,n),n.checked=t[20].value,k(l,i),k(l,r),k(l,a),k(l,s),k(e,o),u||(d=O(n,"change",_),u=!0)},p(c,f){t=c,f&2&&(n.checked=t[20].value),f&2&&h!==(h=C(t[20].label)+"")&&V(s,h),f&2&&D(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+t[20].label+".png')")},d(c){c&&A(e),u=!1,d()}}}function $e(t){let e,l,n=C(t[17].prop)+"",i,r,a,h,s,o,u,d,_,c=R(t[17].filters),f=[];for(let g=0;g<c.length;g+=1)f[g]=ke(be(t,c,g));return{c(){e=$("fieldset"),l=$("legend"),i=I(n),r=q(),a=$("details"),h=$("summary"),s=q(),o=$("div");for(let g=0;g<f.length;g+=1)f[g].c();d=q(),m(h,"class","svelte-1qypxk3"),m(a,"class","filter-details svelte-1qypxk3"),a.open=u=t[17].filters.length<5,m(e,"class",_="filter-cate__"+t[17].prop+" svelte-1qypxk3")},m(g,p){E(g,e,p),k(e,l),k(l,i),k(e,r),k(e,a),k(a,h),k(a,s),k(a,o);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(o,null);k(e,d)},p(g,p){if(p&2&&n!==(n=C(g[17].prop)+"")&&V(i,n),p&2){c=R(g[17].filters);let v;for(v=0;v<c.length;v+=1){const B=be(g,c,v);f[v]?f[v].p(B,p):(f[v]=ke(B),f[v].c(),f[v].m(o,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=c.length}p&2&&u!==(u=g[17].filters.length<5)&&(a.open=u),p&2&&_!==(_="filter-cate__"+g[17].prop+" svelte-1qypxk3")&&m(e,"class",_)},d(g){g&&A(e),x(f,g)}}}function dt(t){let e,l,n,i,r,a,h,s,o,u,d,_,c,f,g=R(t[1]),p=[];for(let v=0;v<g.length;v+=1)p[v]=$e(ye(t,g,v));return{c(){e=$("div"),l=q(),n=$("form"),i=$("details"),r=$("summary"),a=I(`Filters
			`),h=$("label"),s=$("input"),o=q(),u=$("input"),d=q(),_=$("div");for(let v=0;v<p.length;v+=1)p[v].c();m(e,"class","dynamic-style"),m(s,"type","search"),m(s,"placeholder","name"),s.autofocus=!0,m(s,"accesskey","q"),m(u,"type","reset"),u.value="Reset",m(r,"class","filter-summary svelte-1qypxk3"),m(_,"class","flex svelte-1qypxk3"),i.open=!0,m(n,"class","filter-form svelte-1qypxk3")},m(v,B){E(v,e,B),t[6](e),E(v,l,B),E(v,n,B),k(n,i),k(i,r),k(r,a),k(r,h),k(h,s),he(s,t[0]),k(r,o),k(r,u),k(i,d),k(i,_);for(let T=0;T<p.length;T+=1)p[T]&&p[T].m(_,null);s.focus(),c||(f=[O(s,"keydown",Xe(t[5])),O(s,"input",t[7]),O(n,"reset",t[3])],c=!0)},p(v,[B]){if(B&1&&s.value!==v[0]&&he(s,v[0]),B&2){g=R(v[1]);let T;for(T=0;T<g.length;T+=1){const w=ye(v,g,T);p[T]?p[T].p(w,B):(p[T]=$e(w),p[T].c(),p[T].m(_,null))}for(;T<p.length;T+=1)p[T].d(1);p.length=g.length}},i:j,o:j,d(v){v&&(A(e),A(l),A(n)),t[6](null),x(p,v),c=!1,z(f)}}}const we=".student-outer";function _t(t,e,l){let{students:n}=e,i=new URLSearchParams(location.search),r,a=i.get("name")||"",h=["School","TacticRole","BulletType","ArmorType","SquadType","Position"],s=u(n),o={name:"",checkbox:""};function u(w){return h.map(y=>({prop:y,filters:[...new Set(w.map(b=>b[y]))].sort(d).map(b=>({label:b,value:!1}))}))}function d(w,y){let b=C(w),S=C(y),M=b.length,L=S.length;return M===L?0:L-M}function _(){let w=a==null?void 0:a.trim();o.name=w?`${we}:not([data-name*="${w}"]) { display: none; }`:"",f()}function c(){let w=s.map(b=>b.filters.filter(M=>M.value).length?b.filters.filter(M=>!M.value).map(M=>`[data-${b.prop.toLowerCase()}="${M.label}"]`):void 0).flat().filter(Boolean),y=w.length?w.map(b=>`${we}${b}`).join()+"{ display: none !important; }":"";o.checkbox=y,f()}function f(){if(!r)return;let w=o.name+o.checkbox;l(2,r.innerHTML=w?`<style>${w}</style>`:"",r)}function g(){l(0,a=""),s.forEach(w=>{w.filters.forEach(y=>{y.value=!1})}),l(1,s)}je(()=>{f()});function p(w){xe.call(this,t,w)}function v(w){ae[w?"unshift":"push"](()=>{r=w,l(2,r)})}function B(){a=this.value,l(0,a)}function T(w,y){w[y].value=this.checked,l(1,s)}return t.$$set=w=>{"students"in w&&l(4,n=w.students)},t.$$.update=()=>{t.$$.dirty&1&&_(),t.$$.dirty&2&&c()},[a,s,r,g,n,p,v,B,T]}class ht extends le{constructor(e){super(),te(this,e,_t,dt,Z,{students:4})}}function Te(t,e,l){const n=t.slice();return n[8]=e[l],n}function Se(t,e,l){const n=t.slice();return n[11]=e[l],n}function Be(t,e,l){const n=t.slice();return n[14]=e[l],n}function qe(t,e){let l,n,i,r,a,h,s,o,u,d,_,c;n=new Ge({props:{student:e[14]}});function f(){return e[3](e[14])}return{key:t,first:null,c(){l=$("div"),ee(n.$$.fragment),m(l,"class","student-outer svelte-mh4ein"),m(l,"data-name",i=e[14].Name_tw),m(l,"data-school",r=e[14].School),m(l,"data-position",a=e[14].Position),m(l,"data-armortype",h=e[14].ArmorType),m(l,"data-bullettype",s=e[14].BulletType),m(l,"data-squadtype",o=e[14].SquadType),m(l,"data-tacticrole",u=e[14].TacticRole),this.first=l},m(g,p){E(g,l,p),J(n,l,null),d=!0,_||(c=O(l,"click",f),_=!0)},p(g,p){e=g;const v={};p&2&&(v.student=e[14]),n.$set(v),(!d||p&2&&i!==(i=e[14].Name_tw))&&m(l,"data-name",i),(!d||p&2&&r!==(r=e[14].School))&&m(l,"data-school",r),(!d||p&2&&a!==(a=e[14].Position))&&m(l,"data-position",a),(!d||p&2&&h!==(h=e[14].ArmorType))&&m(l,"data-armortype",h),(!d||p&2&&s!==(s=e[14].BulletType))&&m(l,"data-bullettype",s),(!d||p&2&&o!==(o=e[14].SquadType))&&m(l,"data-squadtype",o),(!d||p&2&&u!==(u=e[14].TacticRole))&&m(l,"data-tacticrole",u)},i(g){d||(P(n.$$.fragment,g),d=!0)},o(g){N(n.$$.fragment,g),d=!1},d(g){g&&A(l),Q(n),_=!1,c()}}}function Ae(t){let e,l=[],n=new Map,i,r,a,h=R(t[11].members);const s=o=>o[14].PathName;for(let o=0;o<h.length;o+=1){let u=Be(t,h,o),d=s(u);n.set(d,l[o]=qe(d,u))}return{c(){e=$("div");for(let o=0;o<l.length;o+=1)l[o].c();i=q(),m(e,"class","cell svelte-mh4ein"),m(e,"data-bullettype",r=C(t[8].BulletType)),D(e,"grid-area",t[11].SquadType+"-"+t[8].BulletType)},m(o,u){E(o,e,u);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);k(e,i),a=!0},p(o,u){u&6&&(h=R(o[11].members),K(),l=Ue(l,u,s,1,o,h,n,e,He,qe,i,Be),W()),(!a||u&2&&r!==(r=C(o[8].BulletType)))&&m(e,"data-bullettype",r),(!a||u&2)&&D(e,"grid-area",o[11].SquadType+"-"+o[8].BulletType)},i(o){if(!a){for(let u=0;u<h.length;u+=1)P(l[u]);a=!0}},o(o){for(let u=0;u<l.length;u+=1)N(l[u]);a=!1},d(o){o&&A(e);for(let u=0;u<l.length;u+=1)l[u].d()}}}function Ee(t){let e,l,n=R(t[8].cxt),i=[];for(let a=0;a<n.length;a+=1)i[a]=Ae(Se(t,n,a));const r=a=>N(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Qe()},m(a,h){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(a,h);E(a,e,h),l=!0},p(a,h){if(h&6){n=R(a[8].cxt);let s;for(s=0;s<n.length;s+=1){const o=Se(a,n,s);i[s]?(i[s].p(o,h),P(i[s],1)):(i[s]=Ae(o),i[s].c(),P(i[s],1),i[s].m(e.parentNode,e))}for(K(),s=n.length;s<i.length;s+=1)r(s);W()}},i(a){if(!l){for(let h=0;h<n.length;h+=1)P(i[h]);l=!0}},o(a){i=i.filter(Boolean);for(let h=0;h<i.length;h+=1)N(i[h]);l=!1},d(a){a&&A(e),x(i,a)}}}function pt(t){let e,l,n,i,r,a,h,s,o;l=new ht({props:{students:t[0]}});let u=R(t[1]),d=[];for(let c=0;c<u.length;c+=1)d[c]=Ee(Te(t,u,c));const _=c=>N(d[c],1,1,()=>{d[c]=null});return{c(){e=$("div"),ee(l.$$.fragment),n=q(),i=$("div"),r=$("div"),r.textContent="前",a=q(),h=$("div"),h.textContent="後",s=q();for(let c=0;c<d.length;c+=1)d[c].c();m(r,"class","cell th svelte-mh4ein"),D(r,"grid-area","Main-title"),m(h,"class","cell th svelte-mh4ein"),D(h,"grid-area","Support-title"),m(i,"class","table svelte-mh4ein")},m(c,f){E(c,e,f),J(l,e,null),k(e,n),k(e,i),k(i,r),k(i,a),k(i,h),k(i,s);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(i,null);o=!0},p(c,[f]){const g={};if(f&1&&(g.students=c[0]),l.$set(g),f&6){u=R(c[1]);let p;for(p=0;p<u.length;p+=1){const v=Te(c,u,p);d[p]?(d[p].p(v,f),P(d[p],1)):(d[p]=Ee(v),d[p].c(),P(d[p],1),d[p].m(i,null))}for(K(),p=u.length;p<d.length;p+=1)_(p);W()}},i(c){if(!o){P(l.$$.fragment,c);for(let f=0;f<u.length;f+=1)P(d[f]);o=!0}},o(c){N(l.$$.fragment,c),d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)N(d[f]);o=!1},d(c){c&&A(e),Q(l),x(d,c)}}}function mt(t,e,l){let{students:n=[]}=e;const i=ze();let r=["Explosion","Pierce","Mystic","Sonic"],a;s();function h(){l(1,a=r.map(d=>({BulletType:d,cxt:[{SquadType:"Main",members:[]},{SquadType:"Support",members:[]}]})))}function s(){h(),n.forEach(d=>{let _=r.findIndex(c=>c===d.BulletType);a[_].cxt[d.SquadType==="Main"?0:1].members.push(d)})}function o(d){i("select",{student:d})}const u=d=>o(d);return t.$$set=d=>{"students"in d&&l(0,n=d.students)},[n,a,o,u]}class gt extends le{constructor(e){super(),te(this,e,mt,pt,Z,{students:0})}}function Pe(t,e,l){const n=t.slice();return n[10]=e[l],n[12]=l,n}function Me(t,e,l){const n=t.slice();return n[13]=e[l],n[15]=l,n}function Ne(t){let e,l,n,i,r,a;l=new Ge({props:{student:t[13]}});function h(){return t[8](t[12],t[15])}return{c(){e=$("button"),ee(l.$$.fragment),m(e,"class","student-box svelte-lavo2d"),m(e,"aria-current",n=t[12]===t[0][0]&&t[15]===t[0][1])},m(s,o){E(s,e,o),J(l,e,null),i=!0,r||(a=O(e,"click",h),r=!0)},p(s,o){t=s;const u={};o&2&&(u.student=t[13]),l.$set(u),(!i||o&3&&n!==(n=t[12]===t[0][0]&&t[15]===t[0][1]))&&m(e,"aria-current",n)},i(s){i||(P(l.$$.fragment,s),i=!0)},o(s){N(l.$$.fragment,s),i=!1},d(s){s&&A(e),Q(l),r=!1,a()}}}function Re(t,e){let l,n,i=e[10].title+"",r,a,h,s,o=R(e[10].members),u=[];for(let _=0;_<o.length;_+=1)u[_]=Ne(Me(e,o,_));const d=_=>N(u[_],1,1,()=>{u[_]=null});return{key:t,first:null,c(){l=$("fieldset"),n=$("legend"),r=I(i),a=q(),h=$("div");for(let _=0;_<u.length;_+=1)u[_].c();m(h,"class","team svelte-lavo2d"),m(l,"class","box-part svelte-lavo2d"),D(l,"order",(e[12]+1)*2),this.first=l},m(_,c){E(_,l,c),k(l,n),k(n,r),k(l,a),k(l,h);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(h,null);s=!0},p(_,c){if(e=_,(!s||c&2)&&i!==(i=e[10].title+"")&&V(r,i),c&19){o=R(e[10].members);let f;for(f=0;f<o.length;f+=1){const g=Me(e,o,f);u[f]?(u[f].p(g,c),P(u[f],1)):(u[f]=Ne(g),u[f].c(),P(u[f],1),u[f].m(h,null))}for(K(),f=o.length;f<u.length;f+=1)d(f);W()}(!s||c&2)&&D(l,"order",(e[12]+1)*2)},i(_){if(!s){for(let c=0;c<o.length;c+=1)P(u[c]);s=!0}},o(_){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)N(u[c]);s=!1},d(_){_&&A(l),x(u,_)}}}function vt(t){let e,l,n,i,r,a,h,s,o,u,d,_=[],c=new Map,f,g,p,v,B,T=R(t[1]);const w=y=>y[10].title;for(let y=0;y<T.length;y+=1){let b=Pe(t,T,y),S=w(b);c.set(S,_[y]=Re(S,b))}return{c(){e=$("div"),l=$("label"),n=$("input"),i=q(),r=$("span"),r.textContent="🢁",a=q(),h=$("label"),s=$("input"),o=q(),u=$("span"),u.textContent="🢂🢀",d=q();for(let y=0;y<_.length;y+=1)_[y].c();f=q(),g=$("button"),g.textContent="↻",m(n,"type","checkbox"),m(n,"accesskey","a"),m(l,"title","pin"),m(l,"class","pin-ctrl ctrl svelte-lavo2d"),m(s,"type","checkbox"),m(h,"title","zoom"),m(h,"class","zoom-ctrl ctrl svelte-lavo2d"),m(g,"class","reset-btn svelte-lavo2d"),m(e,"class","box svelte-lavo2d"),se(e,"pin",t[2]),se(e,"zoom",t[3])},m(y,b){E(y,e,b),k(e,l),k(l,n),n.checked=t[2],k(l,i),k(l,r),k(e,a),k(e,h),k(h,s),s.checked=t[3],k(h,o),k(h,u),k(e,d);for(let S=0;S<_.length;S+=1)_[S]&&_[S].m(e,null);k(e,f),k(e,g),p=!0,v||(B=[O(n,"change",t[6]),O(s,"change",t[7]),O(g,"click",t[5])],v=!0)},p(y,[b]){b&4&&(n.checked=y[2]),b&8&&(s.checked=y[3]),b&19&&(T=R(y[1]),K(),_=Ue(_,b,w,1,y,T,c,e,He,Re,f,Pe),W()),(!p||b&4)&&se(e,"pin",y[2]),(!p||b&8)&&se(e,"zoom",y[3])},i(y){if(!p){for(let b=0;b<T.length;b+=1)P(_[b]);p=!0}},o(y){for(let b=0;b<_.length;b+=1)N(_[b]);p=!1},d(y){y&&A(e);for(let b=0;b<_.length;b+=1)_[b].d();v=!1,z(B)}}}function yt(t,e,l){let{focus:n}=e,{teams:i}=e;const r=ze();function a(c,f){r("focus",{teamIndex:c,memberIndex:f})}let h=document.documentElement.clientHeight>700,s=!0;function o(){r("reset")}function u(){h=this.checked,l(2,h)}function d(){s=this.checked,l(3,s)}const _=(c,f)=>a(c,f);return t.$$set=c=>{"focus"in c&&l(0,n=c.focus),"teams"in c&&l(1,i=c.teams)},[n,i,h,s,a,o,u,d,_]}class bt extends le{constructor(e){super(),te(this,e,yt,vt,Z,{focus:0,teams:1})}}function Le(t){let e,l;return e=new gt({props:{students:t[0]}}),e.$on("select",t[3]),{c(){ee(e.$$.fragment)},m(n,i){J(e,n,i),l=!0},p(n,i){const r={};i&1&&(r.students=n[0]),e.$set(r)},i(n){l||(P(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){Q(e,n)}}}function kt(t){let e,l,n,i,r,a,h,s=t[0].length&&Le(t);return i=new bt({props:{focus:t[2],teams:t[1]}}),i.$on("focus",t[5]),i.$on("reset",t[4]),{c(){s&&s.c(),e=q(),l=$("footer"),l.innerHTML='<hr/> <details open=""><summary>url para:</summary> <ul><li>`name=xxx`: name filter</li> <li>`size=96`: image size</li> <li>`icon=1`: show type icon</li></ul></details> <div>data &amp; image come from\n    <a href="https://github.com/lonqie/SchaleDB">https://github.com/lonqie/SchaleDB</a></div> <hr/> <h1>Blue Archive students filter</h1>',n=q(),ee(i.$$.fragment),m(l,"class","svelte-qk8cuv")},m(o,u){s&&s.m(o,u),E(o,e,u),E(o,l,u),E(o,n,u),J(i,o,u),r=!0,a||(h=O(window,"keydown",t[6]),a=!0)},p(o,[u]){o[0].length?s?(s.p(o,u),u&1&&P(s,1)):(s=Le(o),s.c(),P(s,1),s.m(e.parentNode,e)):s&&(K(),N(s,1,1,()=>{s=null}),W());const d={};u&4&&(d.focus=o[2]),u&2&&(d.teams=o[1]),i.$set(d)},i(o){r||(P(s),P(i.$$.fragment,o),r=!0)},o(o){N(s),N(i.$$.fragment,o),r=!1},d(o){o&&(A(e),A(l),A(n)),s&&s.d(o),Q(i,o),a=!1,h()}}}function Ce(){return[{title:"⚔️ Attacker",members:new Array(6).fill({})},{title:"🛡️ Defender",members:new Array(6).fill({})}]}function $t(t,e,l){let n=[],i=Ce(),r=[0,0];je(async()=>{l(0,n=await a())});async function a(){return await fetch(ot).then(c=>c.json())}function h(_){var f;let c=(f=_.detail)==null?void 0:f.student;c&&l(1,i[r[0]].members[r[1]]=c,i)}function s(){l(1,i=Ce())}function o(_){l(2,r=[_.detail.teamIndex,_.detail.memberIndex])}function u(_){let c=_.dir_y||0,f=_.dir_x||0;l(2,r=[(r[0]+c+2)%2,(r[1]+f+6)%6])}function d(_){switch(_.key){case"d":u({dir_x:1});break;case"a":u({dir_x:-1});break;case"w":u({dir_y:-1});break;case"s":u({dir_y:1});break}}return[n,i,r,h,s,o,d]}class wt extends le{constructor(e){super(),te(this,e,$t,kt,Z,{})}}new wt({target:document.getElementById("app")});

var rt=Object.defineProperty;var ot=(e,t,l)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var pe=(e,t,l)=>(ot(e,typeof t!="symbol"?t+"":t,l),l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=l(i);fetch(i.href,r)}})();function H(){}function Je(e){return e()}function Te(){return Object.create(null)}function U(e){e.forEach(Je)}function Qe(e){return typeof e=="function"}function le(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ce;function Se(e,t){return e===t?!0:(ce||(ce=document.createElement("a")),ce.href=t,e===ce.href)}function at(e){return Object.keys(e).length===0}function v(e,t){e.appendChild(t)}function N(e,t,l){e.insertBefore(t,l||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function b(e){return document.createElement(e)}function O(e){return document.createTextNode(e)}function B(){return O(" ")}function ut(){return O("")}function z(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function Xe(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function p(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function ct(e){return Array.from(e.childNodes)}function K(e,t){t=""+t,e.data!==t&&(e.data=t)}function qe(e,t){e.value=t??""}function I(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function fe(e,t,l){e.classList.toggle(t,!!l)}function ft(e,t,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:l,cancelable:n})}let te;function ee(e){te=e}function Ye(){if(!te)throw new Error("Function called outside component initialization");return te}function Ze(e){Ye().$$.on_mount.push(e)}function xe(){const e=Ye();return(t,l,{cancelable:n=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=ft(t,l,{cancelable:n});return i.slice().forEach(u=>{u.call(e,r)}),!r.defaultPrevented}return!0}}function et(e,t){const l=e.$$.callbacks[t.type];l&&l.slice().forEach(n=>n.call(this,t))}const J=[],ge=[];let Q=[];const Be=[],dt=Promise.resolve();let ve=!1;function ht(){ve||(ve=!0,dt.then(tt))}function ye(e){Q.push(e)}const me=new Set;let W=0;function tt(){if(W!==0)return;const e=te;do{try{for(;W<J.length;){const t=J[W];W++,ee(t),_t(t.$$)}}catch(t){throw J.length=0,W=0,t}for(ee(null),J.length=0,W=0;ge.length;)ge.pop()();for(let t=0;t<Q.length;t+=1){const l=Q[t];me.has(l)||(me.add(l),l())}Q.length=0}while(J.length);for(;Be.length;)Be.pop()();ve=!1,me.clear(),ee(e)}function _t(e){if(e.fragment!==null){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ye)}}function pt(e){const t=[],l=[];Q.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),Q=t}const de=new Set;let V;function X(){V={r:0,c:[],p:V}}function Y(){V.r||U(V.c),V=V.p}function M(e,t){e&&e.i&&(de.delete(e),e.i(t))}function j(e,t,l,n){if(e&&e.o){if(de.has(e))return;de.add(e),V.c.push(()=>{de.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function C(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function lt(e,t){j(e,1,1,()=>{t.delete(e.key)})}function nt(e,t,l,n,i,r,u,_,s,o,a,h){let f=e.length,c=r.length,d=f;const g={};for(;d--;)g[e[d].key]=d;const m=[],y=new Map,q=new Map,S=[];for(d=c;d--;){const $=h(i,r,d),A=l($);let L=u.get(A);L?n&&S.push(()=>L.p($,t)):(L=o(A,$),L.c()),y.set(A,m[d]=L),A in g&&q.set(A,Math.abs(d-g[A]))}const T=new Set,w=new Set;function k($){M($,1),$.m(_,a),u.set($.key,$),a=$.first,c--}for(;f&&c;){const $=m[c-1],A=e[f-1],L=$.key,F=A.key;$===A?(a=$.first,f--,c--):y.has(F)?!u.has(L)||T.has(L)?k($):w.has(F)?f--:q.get(L)>q.get(F)?(w.add(L),k($)):(T.add(F),f--):(s(A,u),f--)}for(;f--;){const $=e[f];y.has($.key)||s($,u)}for(;c;)k(m[c-1]);return U(S),m}function ie(e){e&&e.c()}function Z(e,t,l){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,l),ye(()=>{const r=e.$$.on_mount.map(Je).filter(Qe);e.$$.on_destroy?e.$$.on_destroy.push(...r):U(r),e.$$.on_mount=[]}),i.forEach(ye)}function x(e,t){const l=e.$$;l.fragment!==null&&(pt(l.after_update),U(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function mt(e,t){e.$$.dirty[0]===-1&&(J.push(e),ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,l,n,i,r,u,_=[-1]){const s=te;ee(e);const o=e.$$={fragment:null,ctx:[],props:r,update:H,not_equal:i,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Te(),dirty:_,skip_bound:!1,root:t.target||s.$$.root};u&&u(o.root);let a=!1;if(o.ctx=l?l(e,t.props||{},(h,f,...c)=>{const d=c.length?c[0]:f;return o.ctx&&i(o.ctx[h],o.ctx[h]=d)&&(!o.skip_bound&&o.bound[h]&&o.bound[h](d),a&&mt(e,h)),f}):[],o.update(),a=!0,U(o.before_update),o.fragment=n?n(o.ctx):!1,t.target){if(t.hydrate){const h=ct(t.target);o.fragment&&o.fragment.l(h),h.forEach(E)}else o.fragment&&o.fragment.c();t.intro&&M(e.$$.fragment),Z(e,t.target,t.anchor),tt()}ee(s)}class re{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){x(this,1),this.$destroy=H}$on(t,l){if(!Qe(l))return H;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!at(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gt);const vt="/BA/assets/students-37ead7a7.json",yt={Explosion:"爆發",Pierce:"貫穿",Mystic:"神秘",Sonic:"振動",Main:"前排",Support:"後排",School:"學園",TacticRole:"作用",Position:"射程",BulletType:"攻屬",ArmorType:"防屬",SquadType:"分類",DamageDealer:"輸出",Tanker:"坦克",Supporter:"輔助",Healer:"治療",Vehicle:"T.S.",Back:"遠距",Front:"近距",Middle:"中距",LightArmor:"輕甲",HeavyArmor:"重甲",Unarmed:"特殊",ElasticArmor:"彈力",Gehenna:"格黑娜",Millennium:"千年",Trinity:"三一",Abydos:"阿拜多斯",Shanhaijing:"山海經",Hyakkiyako:"百鬼夜行",RedWinter:"赤冬",Valkyrie:"女武神",ETC:"?",SRT:"SRT",Arius:"奧利斯"},it="https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images";function Ae(e){return`${it}/student/collection/${e}.webp`}function Ee(e){return`${it}/ui/Role_${e.TacticRole}.png`}function D(e=""){return yt[e]||e}function bt(e){let t;return{c(){t=b("div"),t.textContent="?",p(t,"class","empty svelte-tuawqy")},m(l,n){N(l,t,n)},p:H,d(l){l&&E(t)}}}function kt(e){let t,l,n,i,r,u,_=D(e[0].BulletType).slice(0,1)+"",s,o,a,h,f,c=D(e[0].ArmorType).slice(0,1)+"",d,g,m,y,q,S,T=e[0].Name_tw+"",w,k,$,A,L=e[0].PathName+"",F,oe,be,ke,we,G,ae=e[0].Name_jp+"",he,ue,_e,$e;return{c(){t=b("img"),i=B(),r=b("div"),u=b("div"),s=O(_),h=B(),f=b("div"),d=O(c),y=B(),q=b("div"),S=b("div"),w=O(T),k=B(),$=b("div"),A=b("a"),F=O(L),be=B(),ke=b("br"),we=B(),G=b("a"),he=O(ae),p(t,"class","avatar svelte-tuawqy"),Se(t.src,l=Ae(e[0].Id))||p(t,"src",l),p(t,"alt",n=Pe(e[0])),p(u,"class","icon color svelte-tuawqy"),p(u,"data-bullettype",o=e[0].BulletType),p(u,"title",a=e[0].BulletType),p(f,"class","icon color svelte-tuawqy"),p(f,"data-armortype",g=e[0].ArmorType),p(f,"title",m=e[0].ArmorType),p(r,"class","icons svelte-tuawqy"),p(S,"class","name-inner svelte-tuawqy"),p(A,"href",oe="https://schale.gg/?chara="+e[0].PathName),p(A,"target","schale.gg"),p(G,"href",ue="https://bluearchive.wikiru.jp/?"+e[0].Name_jp+"#Profile"),p(G,"target","wikiru"),p($,"class","tip svelte-tuawqy"),p(q,"class","name svelte-tuawqy"),I(q,"--icon-role","url("+Ee(e[0])+")")},m(P,R){N(P,t,R),N(P,i,R),N(P,r,R),v(r,u),v(u,s),v(r,h),v(r,f),v(f,d),N(P,y,R),N(P,q,R),v(q,S),v(S,w),v(q,k),v(q,$),v($,A),v(A,F),v($,be),v($,ke),v($,we),v($,G),v(G,he),_e||($e=z($,"click",Xe(e[1])),_e=!0)},p(P,R){R&1&&!Se(t.src,l=Ae(P[0].Id))&&p(t,"src",l),R&1&&n!==(n=Pe(P[0]))&&p(t,"alt",n),R&1&&_!==(_=D(P[0].BulletType).slice(0,1)+"")&&K(s,_),R&1&&o!==(o=P[0].BulletType)&&p(u,"data-bullettype",o),R&1&&a!==(a=P[0].BulletType)&&p(u,"title",a),R&1&&c!==(c=D(P[0].ArmorType).slice(0,1)+"")&&K(d,c),R&1&&g!==(g=P[0].ArmorType)&&p(f,"data-armortype",g),R&1&&m!==(m=P[0].ArmorType)&&p(f,"title",m),R&1&&T!==(T=P[0].Name_tw+"")&&K(w,T),R&1&&L!==(L=P[0].PathName+"")&&K(F,L),R&1&&oe!==(oe="https://schale.gg/?chara="+P[0].PathName)&&p(A,"href",oe),R&1&&ae!==(ae=P[0].Name_jp+"")&&K(he,ae),R&1&&ue!==(ue="https://bluearchive.wikiru.jp/?"+P[0].Name_jp+"#Profile")&&p(G,"href",ue),R&1&&I(q,"--icon-role","url("+Ee(P[0])+")")},d(P){P&&(E(t),E(i),E(r),E(y),E(q)),_e=!1,$e()}}}function wt(e){let t;function l(r,u){return r[0].Id?kt:bt}let n=l(e),i=n(e);return{c(){t=b("div"),i.c(),p(t,"class","student svelte-tuawqy")},m(r,u){N(r,t,u),i.m(t,null)},p(r,[u]){n===(n=l(r))&&i?i.p(r,u):(i.d(1),i=n(r),i&&(i.c(),i.m(t,null)))},i:H,o:H,d(r){r&&E(t),i.d()}}}function Pe(e){return`${e.Name_tw}, ${e.Name_jp}, ${e.PathName}`}function $t(e,t,l){let{student:n={}}=t;function i(r){et.call(this,e,r)}return e.$$set=r=>{"student"in r&&l(0,n=r.student)},[n,i]}class st extends re{constructor(t){super(),se(this,t,$t,wt,le,{student:0})}}function Ne(e,t,l){const n=e.slice();return n[17]=t[l],n}function Me(e,t,l){const n=e.slice();return n[20]=t[l],n[21]=t,n[22]=l,n}function Re(e){let t,l,n,i,r,u,_=D(e[20].label)+"",s,o,a,h;function f(){e[8].call(n,e[21],e[22])}return{c(){t=b("div"),l=b("label"),n=b("input"),i=B(),r=b("i"),u=B(),s=O(_),o=B(),p(n,"type","checkbox"),p(r,"class","label-icon"),I(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+e[20].label+".png')")},m(c,d){N(c,t,d),v(t,l),v(l,n),n.checked=e[20].value,v(l,i),v(l,r),v(l,u),v(l,s),v(t,o),a||(h=z(n,"change",f),a=!0)},p(c,d){e=c,d&2&&(n.checked=e[20].value),d&2&&_!==(_=D(e[20].label)+"")&&K(s,_),d&2&&I(l,"--icon-path","url('https://proxy.duckduckgo.com/iu/?u=https://raw.githubusercontent.com/lonqie/SchaleDB/main/images/ui/Role_"+e[20].label+".png')")},d(c){c&&E(t),a=!1,h()}}}function Le(e){let t,l,n=D(e[17].prop)+"",i,r,u,_,s,o,a,h,f,c=C(e[17].filters),d=[];for(let g=0;g<c.length;g+=1)d[g]=Re(Me(e,c,g));return{c(){t=b("fieldset"),l=b("legend"),i=O(n),r=B(),u=b("details"),_=b("summary"),s=B(),o=b("div");for(let g=0;g<d.length;g+=1)d[g].c();h=B(),p(_,"class","svelte-1q95fnr"),p(u,"class","filter-details svelte-1q95fnr"),u.open=a=e[17].filters.length<5,p(t,"class",f="filter-cate__"+e[17].prop+" svelte-1q95fnr")},m(g,m){N(g,t,m),v(t,l),v(l,i),v(t,r),v(t,u),v(u,_),v(u,s),v(u,o);for(let y=0;y<d.length;y+=1)d[y]&&d[y].m(o,null);v(t,h)},p(g,m){if(m&2&&n!==(n=D(g[17].prop)+"")&&K(i,n),m&2){c=C(g[17].filters);let y;for(y=0;y<c.length;y+=1){const q=Me(g,c,y);d[y]?d[y].p(q,m):(d[y]=Re(q),d[y].c(),d[y].m(o,null))}for(;y<d.length;y+=1)d[y].d(1);d.length=c.length}m&2&&a!==(a=g[17].filters.length<5)&&(u.open=a),m&2&&f!==(f="filter-cate__"+g[17].prop+" svelte-1q95fnr")&&p(t,"class",f)},d(g){g&&E(t),ne(d,g)}}}function Tt(e){let t,l,n,i,r,u,_,s,o,a,h,f,c,d,g=C(e[1]),m=[];for(let y=0;y<g.length;y+=1)m[y]=Le(Ne(e,g,y));return{c(){t=b("div"),l=B(),n=b("form"),i=b("details"),r=b("summary"),u=O(`Filters
			`),_=b("label"),s=b("input"),o=B(),a=b("input"),h=B(),f=b("div");for(let y=0;y<m.length;y+=1)m[y].c();p(t,"class","dynamic-style"),p(s,"type","search"),p(s,"placeholder","name"),s.autofocus=!0,p(s,"accesskey","q"),p(a,"type","reset"),a.value="Reset",p(r,"class","filter-summary svelte-1q95fnr"),p(f,"class","flex svelte-1q95fnr"),i.open=!0,p(n,"class","filter-form svelte-1q95fnr")},m(y,q){N(y,t,q),e[6](t),N(y,l,q),N(y,n,q),v(n,i),v(i,r),v(r,u),v(r,_),v(_,s),qe(s,e[0]),v(r,o),v(r,a),v(i,h),v(i,f);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(f,null);s.focus(),c||(d=[z(s,"keydown",Xe(e[5])),z(s,"input",e[7]),z(n,"reset",e[3])],c=!0)},p(y,[q]){if(q&1&&s.value!==y[0]&&qe(s,y[0]),q&2){g=C(y[1]);let S;for(S=0;S<g.length;S+=1){const T=Ne(y,g,S);m[S]?m[S].p(T,q):(m[S]=Le(T),m[S].c(),m[S].m(f,null))}for(;S<m.length;S+=1)m[S].d(1);m.length=g.length}},i:H,o:H,d(y){y&&(E(t),E(l),E(n)),e[6](null),ne(m,y),c=!1,U(d)}}}const je=".student-outer";function St(e,t,l){let{students:n}=t,i=new URLSearchParams(location.search),r,u=i.get("name")||"",_=["School","TacticRole","BulletType","ArmorType","SquadType","Position"],s=a(n),o={name:"",checkbox:""};function a(T){return _.map(w=>({prop:w,filters:[...new Set(T.map(k=>k[w]))].sort(h).map(k=>({label:k,value:!1}))}))}function h(T,w){let k=D(T),$=D(w),A=k.length,L=$.length;return A===L?0:L-A}function f(){let T=u==null?void 0:u.trim();o.name=T?`${je}:not([data-name*="${T}"]) { display: none; }`:"",d()}function c(){let T=s.map(k=>k.filters.filter(A=>A.value).length?k.filters.filter(A=>!A.value).map(A=>`[data-${k.prop.toLowerCase()}="${A.label}"]`):void 0).flat().filter(Boolean),w=T.length?T.map(k=>`${je}${k}`).join()+"{ display: none !important; }":"";o.checkbox=w,d()}function d(){if(!r)return;let T=o.name+o.checkbox;l(2,r.innerHTML=T?`<style>${T}</style>`:"",r)}function g(){l(0,u=""),s.forEach(T=>{T.filters.forEach(w=>{w.value=!1})}),l(1,s)}Ze(()=>{d()});function m(T){et.call(this,e,T)}function y(T){ge[T?"unshift":"push"](()=>{r=T,l(2,r)})}function q(){u=this.value,l(0,u)}function S(T,w){T[w].value=this.checked,l(1,s)}return e.$$set=T=>{"students"in T&&l(4,n=T.students)},e.$$.update=()=>{e.$$.dirty&1&&f(),e.$$.dirty&2&&c()},[u,s,r,g,n,m,y,q,S]}class qt extends re{constructor(t){super(),se(this,t,St,Tt,le,{students:4})}}function Ce(e,t,l){const n=e.slice();return n[8]=t[l],n}function De(e,t,l){const n=e.slice();return n[11]=t[l],n}function Oe(e,t,l){const n=e.slice();return n[14]=t[l],n}function ze(e,t){let l,n,i,r,u,_,s,o,a,h,f,c;n=new st({props:{student:t[14]}});function d(){return t[3](t[14])}return{key:e,first:null,c(){l=b("div"),ie(n.$$.fragment),p(l,"class","student-outer svelte-c6bdz8"),p(l,"data-name",i=t[14].Name_tw),p(l,"data-school",r=t[14].School),p(l,"data-position",u=t[14].Position),p(l,"data-armortype",_=t[14].ArmorType),p(l,"data-bullettype",s=t[14].BulletType),p(l,"data-squadtype",o=t[14].SquadType),p(l,"data-tacticrole",a=t[14].TacticRole),this.first=l},m(g,m){N(g,l,m),Z(n,l,null),h=!0,f||(c=z(l,"click",d),f=!0)},p(g,m){t=g;const y={};m&2&&(y.student=t[14]),n.$set(y),(!h||m&2&&i!==(i=t[14].Name_tw))&&p(l,"data-name",i),(!h||m&2&&r!==(r=t[14].School))&&p(l,"data-school",r),(!h||m&2&&u!==(u=t[14].Position))&&p(l,"data-position",u),(!h||m&2&&_!==(_=t[14].ArmorType))&&p(l,"data-armortype",_),(!h||m&2&&s!==(s=t[14].BulletType))&&p(l,"data-bullettype",s),(!h||m&2&&o!==(o=t[14].SquadType))&&p(l,"data-squadtype",o),(!h||m&2&&a!==(a=t[14].TacticRole))&&p(l,"data-tacticrole",a)},i(g){h||(M(n.$$.fragment,g),h=!0)},o(g){j(n.$$.fragment,g),h=!1},d(g){g&&E(l),x(n),f=!1,c()}}}function Ie(e){let t,l=[],n=new Map,i,r,u,_=C(e[11].members);const s=o=>o[14].PathName;for(let o=0;o<_.length;o+=1){let a=Oe(e,_,o),h=s(a);n.set(h,l[o]=ze(h,a))}return{c(){t=b("div");for(let o=0;o<l.length;o+=1)l[o].c();i=B(),p(t,"class","cell svelte-c6bdz8"),p(t,"data-bullettype",r=D(e[8].BulletType)),I(t,"grid-area",e[11].SquadType+"-"+e[8].BulletType)},m(o,a){N(o,t,a);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);v(t,i),u=!0},p(o,a){a&6&&(_=C(o[11].members),X(),l=nt(l,a,s,1,o,_,n,t,lt,ze,i,Oe),Y()),(!u||a&2&&r!==(r=D(o[8].BulletType)))&&p(t,"data-bullettype",r),(!u||a&2)&&I(t,"grid-area",o[11].SquadType+"-"+o[8].BulletType)},i(o){if(!u){for(let a=0;a<_.length;a+=1)M(l[a]);u=!0}},o(o){for(let a=0;a<l.length;a+=1)j(l[a]);u=!1},d(o){o&&E(t);for(let a=0;a<l.length;a+=1)l[a].d()}}}function Fe(e){let t,l,n=C(e[8].cxt),i=[];for(let u=0;u<n.length;u+=1)i[u]=Ie(De(e,n,u));const r=u=>j(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();t=ut()},m(u,_){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(u,_);N(u,t,_),l=!0},p(u,_){if(_&6){n=C(u[8].cxt);let s;for(s=0;s<n.length;s+=1){const o=De(u,n,s);i[s]?(i[s].p(o,_),M(i[s],1)):(i[s]=Ie(o),i[s].c(),M(i[s],1),i[s].m(t.parentNode,t))}for(X(),s=n.length;s<i.length;s+=1)r(s);Y()}},i(u){if(!l){for(let _=0;_<n.length;_+=1)M(i[_]);l=!0}},o(u){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)j(i[_]);l=!1},d(u){u&&E(t),ne(i,u)}}}function Bt(e){let t,l,n,i,r,u,_,s,o;l=new qt({props:{students:e[0]}});let a=C(e[1]),h=[];for(let c=0;c<a.length;c+=1)h[c]=Fe(Ce(e,a,c));const f=c=>j(h[c],1,1,()=>{h[c]=null});return{c(){t=b("div"),ie(l.$$.fragment),n=B(),i=b("div"),r=b("div"),r.textContent="前",u=B(),_=b("div"),_.textContent="後",s=B();for(let c=0;c<h.length;c+=1)h[c].c();p(r,"class","cell th svelte-c6bdz8"),I(r,"grid-area","Main-title"),p(_,"class","cell th svelte-c6bdz8"),I(_,"grid-area","Support-title"),p(i,"class","table svelte-c6bdz8")},m(c,d){N(c,t,d),Z(l,t,null),v(t,n),v(t,i),v(i,r),v(i,u),v(i,_),v(i,s);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(i,null);o=!0},p(c,[d]){const g={};if(d&1&&(g.students=c[0]),l.$set(g),d&6){a=C(c[1]);let m;for(m=0;m<a.length;m+=1){const y=Ce(c,a,m);h[m]?(h[m].p(y,d),M(h[m],1)):(h[m]=Fe(y),h[m].c(),M(h[m],1),h[m].m(i,null))}for(X(),m=a.length;m<h.length;m+=1)f(m);Y()}},i(c){if(!o){M(l.$$.fragment,c);for(let d=0;d<a.length;d+=1)M(h[d]);o=!0}},o(c){j(l.$$.fragment,c),h=h.filter(Boolean);for(let d=0;d<h.length;d+=1)j(h[d]);o=!1},d(c){c&&E(t),x(l),ne(h,c)}}}function At(e,t,l){let{students:n=[]}=t;const i=xe();let r=["Explosion","Pierce","Mystic","Sonic"],u;s();function _(){l(1,u=r.map(h=>({BulletType:h,cxt:[{SquadType:"Main",members:[]},{SquadType:"Support",members:[]}]})))}function s(){_(),n.forEach(h=>{let f=r.findIndex(c=>c===h.BulletType);u[f].cxt[h.SquadType==="Main"?0:1].members.push(h)})}function o(h){i("select",{student:h})}const a=h=>o(h);return e.$$set=h=>{"students"in h&&l(0,n=h.students)},[n,u,o,a]}class Et extends re{constructor(t){super(),se(this,t,At,Bt,le,{students:0})}}function Ke(e,t,l){const n=e.slice();return n[10]=t[l],n[12]=l,n}function He(e,t,l){const n=e.slice();return n[13]=t[l],n[15]=l,n}function Ue(e){let t,l,n,i,r,u;l=new st({props:{student:e[13]}});function _(){return e[8](e[12],e[15])}return{c(){t=b("button"),ie(l.$$.fragment),p(t,"class","student-box svelte-u861hm"),p(t,"aria-current",n=e[12]===e[0][0]&&e[15]===e[0][1])},m(s,o){N(s,t,o),Z(l,t,null),i=!0,r||(u=z(t,"click",_),r=!0)},p(s,o){e=s;const a={};o&2&&(a.student=e[13]),l.$set(a),(!i||o&3&&n!==(n=e[12]===e[0][0]&&e[15]===e[0][1]))&&p(t,"aria-current",n)},i(s){i||(M(l.$$.fragment,s),i=!0)},o(s){j(l.$$.fragment,s),i=!1},d(s){s&&E(t),x(l),r=!1,u()}}}function Ve(e,t){let l,n,i=t[10].title+"",r,u,_,s,o=C(t[10].members),a=[];for(let f=0;f<o.length;f+=1)a[f]=Ue(He(t,o,f));const h=f=>j(a[f],1,1,()=>{a[f]=null});return{key:e,first:null,c(){l=b("fieldset"),n=b("legend"),r=O(i),u=B(),_=b("div");for(let f=0;f<a.length;f+=1)a[f].c();p(_,"class","team svelte-u861hm"),p(l,"class","box-part svelte-u861hm"),I(l,"order",(t[12]+1)*2),this.first=l},m(f,c){N(f,l,c),v(l,n),v(n,r),v(l,u),v(l,_);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(_,null);s=!0},p(f,c){if(t=f,(!s||c&2)&&i!==(i=t[10].title+"")&&K(r,i),c&19){o=C(t[10].members);let d;for(d=0;d<o.length;d+=1){const g=He(t,o,d);a[d]?(a[d].p(g,c),M(a[d],1)):(a[d]=Ue(g),a[d].c(),M(a[d],1),a[d].m(_,null))}for(X(),d=o.length;d<a.length;d+=1)h(d);Y()}(!s||c&2)&&I(l,"order",(t[12]+1)*2)},i(f){if(!s){for(let c=0;c<o.length;c+=1)M(a[c]);s=!0}},o(f){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)j(a[c]);s=!1},d(f){f&&E(l),ne(a,f)}}}function Pt(e){let t,l,n,i,r,u,_,s,o,a,h,f=[],c=new Map,d,g,m,y,q,S=C(e[1]);const T=w=>w[10].title;for(let w=0;w<S.length;w+=1){let k=Ke(e,S,w),$=T(k);c.set($,f[w]=Ve($,k))}return{c(){t=b("div"),l=b("label"),n=b("input"),i=B(),r=b("span"),r.textContent="🢁",u=B(),_=b("label"),s=b("input"),o=B(),a=b("span"),a.textContent="🢂🢀",h=B();for(let w=0;w<f.length;w+=1)f[w].c();d=B(),g=b("button"),g.textContent="↻",p(n,"type","checkbox"),p(n,"accesskey","a"),p(l,"title","pin"),p(l,"class","pin-ctrl ctrl svelte-u861hm"),p(s,"type","checkbox"),p(_,"title","zoom"),p(_,"class","zoom-ctrl ctrl svelte-u861hm"),p(g,"class","reset-btn svelte-u861hm"),p(t,"class","box svelte-u861hm"),fe(t,"pin",e[2]),fe(t,"zoom",e[3])},m(w,k){N(w,t,k),v(t,l),v(l,n),n.checked=e[2],v(l,i),v(l,r),v(t,u),v(t,_),v(_,s),s.checked=e[3],v(_,o),v(_,a),v(t,h);for(let $=0;$<f.length;$+=1)f[$]&&f[$].m(t,null);v(t,d),v(t,g),m=!0,y||(q=[z(n,"change",e[6]),z(s,"change",e[7]),z(g,"click",e[5])],y=!0)},p(w,[k]){k&4&&(n.checked=w[2]),k&8&&(s.checked=w[3]),k&19&&(S=C(w[1]),X(),f=nt(f,k,T,1,w,S,c,t,lt,Ve,d,Ke),Y()),(!m||k&4)&&fe(t,"pin",w[2]),(!m||k&8)&&fe(t,"zoom",w[3])},i(w){if(!m){for(let k=0;k<S.length;k+=1)M(f[k]);m=!0}},o(w){for(let k=0;k<f.length;k+=1)j(f[k]);m=!1},d(w){w&&E(t);for(let k=0;k<f.length;k+=1)f[k].d();y=!1,U(q)}}}function Nt(e,t,l){let{focus:n}=t,{teams:i}=t;const r=xe();function u(c,d){r("focus",{teamIndex:c,memberIndex:d})}let _=document.documentElement.clientHeight>700,s=!0;function o(){r("reset")}function a(){_=this.checked,l(2,_)}function h(){s=this.checked,l(3,s)}const f=(c,d)=>u(c,d);return e.$$set=c=>{"focus"in c&&l(0,n=c.focus),"teams"in c&&l(1,i=c.teams)},[n,i,_,s,u,o,a,h,f]}class Mt extends re{constructor(t){super(),se(this,t,Nt,Pt,le,{focus:0,teams:1})}}function Ge(e){let t,l;return t=new Et({props:{students:e[0]}}),t.$on("select",e[3]),{c(){ie(t.$$.fragment)},m(n,i){Z(t,n,i),l=!0},p(n,i){const r={};i&1&&(r.students=n[0]),t.$set(r)},i(n){l||(M(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){x(t,n)}}}function Rt(e){let t,l,n,i,r,u,_,s=e[0].length&&Ge(e);return i=new Mt({props:{focus:e[2],teams:e[1]}}),i.$on("focus",e[5]),i.$on("reset",e[4]),{c(){s&&s.c(),t=B(),l=b("footer"),l.innerHTML='<hr/> <details open=""><summary>Tips:</summary> <ul><li>`?name=xxx`: name filter</li> <li>alt+q: focus name filter</li> <li>alt+a: toggle boxing visibility</li> <li>w,a,s,d: navigating boxing focus</li></ul></details> <div>data &amp; image come from\n		<a href="https://github.com/lonqie/SchaleDB">https://github.com/lonqie/SchaleDB</a></div> <hr/> <h1>Blue Archive students filter</h1>',n=B(),ie(i.$$.fragment),p(l,"class","svelte-7gunl4")},m(o,a){s&&s.m(o,a),N(o,t,a),N(o,l,a),N(o,n,a),Z(i,o,a),r=!0,u||(_=z(window,"keydown",e[6]),u=!0)},p(o,[a]){o[0].length?s?(s.p(o,a),a&1&&M(s,1)):(s=Ge(o),s.c(),M(s,1),s.m(t.parentNode,t)):s&&(X(),j(s,1,1,()=>{s=null}),Y());const h={};a&4&&(h.focus=o[2]),a&2&&(h.teams=o[1]),i.$set(h)},i(o){r||(M(s),M(i.$$.fragment,o),r=!0)},o(o){j(s),j(i.$$.fragment,o),r=!1},d(o){o&&(E(t),E(l),E(n)),s&&s.d(o),x(i,o),u=!1,_()}}}function We(){return[{title:"⚔️ Attacker",members:new Array(6).fill({})},{title:"🛡️ Defender",members:new Array(6).fill({})}]}function Lt(e,t,l){let n=[],i=We(),r=[0,0];Ze(async()=>{l(0,n=await u())});async function u(){return await fetch(vt).then(c=>c.json())}function _(f){var d;let c=(d=f.detail)==null?void 0:d.student;c&&l(1,i[r[0]].members[r[1]]=c,i)}function s(){l(1,i=We())}function o(f){l(2,r=[f.detail.teamIndex,f.detail.memberIndex])}function a(f){let c=f.dir_y||0,d=f.dir_x||0;l(2,r=[(r[0]+c+2)%2,(r[1]+d+6)%6])}function h(f){if(!(f.altKey||f.ctrlKey))switch(f.code){case"KeyD":a({dir_x:1});break;case"KeyA":a({dir_x:-1});break;case"KeyW":a({dir_y:-1});break;case"KeyS":a({dir_y:1});break}}return[n,i,r,_,s,o,h]}class jt extends re{constructor(t){super(),se(this,t,Lt,Rt,le,{})}}new jt({target:document.getElementById("app")});
